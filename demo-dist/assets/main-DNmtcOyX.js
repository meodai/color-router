var gn=e=>{throw TypeError(e)};var Mt=(e,t,n)=>t.has(e)||gn("Cannot "+n);var l=(e,t,n)=>(Mt(e,t,"read from private field"),n?n.call(e):t.get(e)),R=(e,t,n)=>t.has(e)?gn("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),U=(e,t,n,o)=>(Mt(e,t,"write to private field"),o?o.call(e,n):t.set(e,n),n),k=(e,t,n)=>(Mt(e,t,"access private method"),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();const Yn=(e,t)=>{if(typeof e=="number"){if(t===3)return{mode:"rgb",r:(e>>8&15|e>>4&240)/255,g:(e>>4&15|e&240)/255,b:(e&15|e<<4&240)/255};if(t===4)return{mode:"rgb",r:(e>>12&15|e>>8&240)/255,g:(e>>8&15|e>>4&240)/255,b:(e>>4&15|e&240)/255,alpha:(e&15|e<<4&240)/255};if(t===6)return{mode:"rgb",r:(e>>16&255)/255,g:(e>>8&255)/255,b:(e&255)/255};if(t===8)return{mode:"rgb",r:(e>>24&255)/255,g:(e>>16&255)/255,b:(e>>8&255)/255,alpha:(e&255)/255}}},Yr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Kr=e=>Yn(Yr[e.toLowerCase()],6),Zr=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,Jr=e=>{let t;return(t=e.match(Zr))?Yn(parseInt(t[1],16),t[1].length):void 0},de="([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)",Ae=`${de}%`,rn=`(?:${de}%|${de})`,Gr=`(?:${de}(deg|grad|rad|turn)|${de})`,ze="\\s*,\\s*",Ur=new RegExp(`^rgba?\\(\\s*${de}${ze}${de}${ze}${de}\\s*(?:,\\s*${rn}\\s*)?\\)$`),Qr=new RegExp(`^rgba?\\(\\s*${Ae}${ze}${Ae}${ze}${Ae}\\s*(?:,\\s*${rn}\\s*)?\\)$`),eo=e=>{let t={mode:"rgb"},n;if(n=e.match(Ur))n[1]!==void 0&&(t.r=n[1]/255),n[2]!==void 0&&(t.g=n[2]/255),n[3]!==void 0&&(t.b=n[3]/255);else if(n=e.match(Qr))n[1]!==void 0&&(t.r=n[1]/100),n[2]!==void 0&&(t.g=n[2]/100),n[3]!==void 0&&(t.b=n[3]/100);else return;return n[4]!==void 0?t.alpha=Math.max(0,Math.min(1,n[4]/100)):n[5]!==void 0&&(t.alpha=Math.max(0,Math.min(1,+n[5]))),t},to=(e,t)=>e===void 0?void 0:typeof e!="object"?V(e):e.mode!==void 0?e:t?{...e,mode:t}:void 0,Me=(e="rgb")=>t=>(t=to(t,e))!==void 0?t.mode===e?t:ee[t.mode][e]?ee[t.mode][e](t):e==="rgb"?ee[t.mode].rgb(t):ee.rgb[e](ee[t.mode].rgb(t)):void 0,ee={},Kn={},Ge=[],Zn={},no=e=>e,P=e=>(ee[e.mode]={...ee[e.mode],...e.toMode},Object.keys(e.fromMode||{}).forEach(t=>{ee[t]||(ee[t]={}),ee[t][e.mode]=e.fromMode[t]}),e.ranges||(e.ranges={}),e.difference||(e.difference={}),e.channels.forEach(t=>{if(e.ranges[t]===void 0&&(e.ranges[t]=[0,1]),!e.interpolate[t])throw new Error(`Missing interpolator for: ${t}`);typeof e.interpolate[t]=="function"&&(e.interpolate[t]={use:e.interpolate[t]}),e.interpolate[t].fixup||(e.interpolate[t].fixup=no)}),Kn[e.mode]=e,(e.parse||[]).forEach(t=>{ro(t,e.mode)}),Me(e.mode)),Jn=e=>Kn[e],ro=(e,t)=>{if(typeof e=="string"){if(!t)throw new Error("'mode' required when 'parser' is a string");Zn[e]=t}else typeof e=="function"&&Ge.indexOf(e)<0&&Ge.push(e)},Xt=/[^\x00-\x7F]|[a-zA-Z_]/,oo=/[^\x00-\x7F]|[-\w]/,c={Function:"function",Ident:"ident",Number:"number",Percentage:"percentage",ParenClose:")",None:"none",Hue:"hue",Alpha:"alpha"};let y=0;function Ke(e){let t=e[y],n=e[y+1];return t==="-"||t==="+"?/\d/.test(n)||n==="."&&/\d/.test(e[y+2]):t==="."?/\d/.test(n):/\d/.test(t)}function Bt(e){if(y>=e.length)return!1;let t=e[y];if(Xt.test(t))return!0;if(t==="-"){if(e.length-y<2)return!1;let n=e[y+1];return!!(n==="-"||Xt.test(n))}return!1}const so={deg:1,rad:180/Math.PI,grad:9/10,turn:360};function He(e){let t="";if((e[y]==="-"||e[y]==="+")&&(t+=e[y++]),t+=Ze(e),e[y]==="."&&/\d/.test(e[y+1])&&(t+=e[y++]+Ze(e)),(e[y]==="e"||e[y]==="E")&&((e[y+1]==="-"||e[y+1]==="+")&&/\d/.test(e[y+2])?t+=e[y++]+e[y++]+Ze(e):/\d/.test(e[y+1])&&(t+=e[y++]+Ze(e))),Bt(e)){let n=Ue(e);return n==="deg"||n==="rad"||n==="turn"||n==="grad"?{type:c.Hue,value:t*so[n]}:void 0}return e[y]==="%"?(y++,{type:c.Percentage,value:+t}):{type:c.Number,value:+t}}function Ze(e){let t="";for(;/\d/.test(e[y]);)t+=e[y++];return t}function Ue(e){let t="";for(;y<e.length&&oo.test(e[y]);)t+=e[y++];return t}function io(e){let t=Ue(e);return e[y]==="("?(y++,{type:c.Function,value:t}):t==="none"?{type:c.None,value:void 0}:{type:c.Ident,value:t}}function ao(e=""){let t=e.trim(),n=[],o;for(y=0;y<t.length;){if(o=t[y++],o===`
`||o==="	"||o===" "){for(;y<t.length&&(t[y]===`
`||t[y]==="	"||t[y]===" ");)y++;continue}if(o===",")return;if(o===")"){n.push({type:c.ParenClose});continue}if(o==="+"){if(y--,Ke(t)){n.push(He(t));continue}return}if(o==="-"){if(y--,Ke(t)){n.push(He(t));continue}if(Bt(t)){n.push({type:c.Ident,value:Ue(t)});continue}return}if(o==="."){if(y--,Ke(t)){n.push(He(t));continue}return}if(o==="/"){for(;y<t.length&&(t[y]===`
`||t[y]==="	"||t[y]===" ");)y++;let r;if(Ke(t)&&(r=He(t),r.type!==c.Hue)){n.push({type:c.Alpha,value:r});continue}if(Bt(t)&&Ue(t)==="none"){n.push({type:c.Alpha,value:{type:c.None,value:void 0}});continue}return}if(/\d/.test(o)){y--,n.push(He(t));continue}if(Xt.test(o)){y--,n.push(io(t));continue}return}return n}function lo(e){e._i=0;let t=e[e._i++];if(!t||t.type!==c.Function||t.value!=="color"||(t=e[e._i++],t.type!==c.Ident))return;const n=Zn[t.value];if(!n)return;const o={mode:n},r=Gn(e,!1);if(!r)return;const s=Jn(n).channels;for(let i=0,a,d;i<s.length;i++)a=r[i],d=s[i],a.type!==c.None&&(o[d]=a.type===c.Number?a.value:a.value/100,d==="alpha"&&(o[d]=Math.max(0,Math.min(1,o[d]))));return o}function Gn(e,t){const n=[];let o;for(;e._i<e.length;){if(o=e[e._i++],o.type===c.None||o.type===c.Number||o.type===c.Alpha||o.type===c.Percentage||t&&o.type===c.Hue){n.push(o);continue}if(o.type===c.ParenClose){if(e._i<e.length)return;continue}return}if(!(n.length<3||n.length>4)){if(n.length===4){if(n[3].type!==c.Alpha)return;n[3]=n[3].value}return n.length===3&&n.push({type:c.None,value:void 0}),n.every(r=>r.type!==c.Alpha)?n:void 0}}function fo(e,t){e._i=0;let n=e[e._i++];if(!n||n.type!==c.Function)return;let o=Gn(e,t);if(o)return o.unshift(n.value),o}const V=e=>{if(typeof e!="string")return;const t=ao(e),n=t?fo(t,!0):void 0;let o,r=0,s=Ge.length;for(;r<s;)if((o=Ge[r++](e,n))!==void 0)return o;return t?lo(t):void 0};function co(e,t){if(!t||t[0]!=="rgb"&&t[0]!=="rgba")return;const n={mode:"rgb"},[,o,r,s,i]=t;if(!(o.type===c.Hue||r.type===c.Hue||s.type===c.Hue))return o.type!==c.None&&(n.r=o.type===c.Number?o.value/255:o.value/100),r.type!==c.None&&(n.g=r.type===c.Number?r.value/255:r.value/100),s.type!==c.None&&(n.b=s.type===c.Number?s.value/255:s.value/100),i.type!==c.None&&(n.alpha=Math.min(1,Math.max(0,i.type===c.Number?i.value:i.value/100))),n}const uo=e=>e==="transparent"?{mode:"rgb",r:0,g:0,b:0,alpha:0}:void 0,ho=(e,t,n)=>e+n*(t-e),po=e=>{let t=[];for(let n=0;n<e.length-1;n++){let o=e[n],r=e[n+1];o===void 0&&r===void 0?t.push(void 0):o!==void 0&&r!==void 0?t.push([o,r]):t.push(o!==void 0?[o,o]:[r,r])}return t},go=e=>t=>{let n=po(t);return o=>{let r=o*n.length,s=o>=1?n.length-1:Math.max(Math.floor(r),0),i=n[s];return i===void 0?void 0:e(i[0],i[1],r-s)}},g=go(ho),I=e=>{let t=!1,n=e.map(o=>o!==void 0?(t=!0,o):1);return t?n:e},Re={mode:"rgb",channels:["r","g","b","alpha"],parse:[co,Jr,eo,Kr,uo,"srgb"],serialize:"srgb",interpolate:{r:g,g,b:g,alpha:{use:g,fixup:I}},gamut:!0,white:{r:1,g:1,b:1},black:{r:0,g:0,b:0}},yt=(e=0)=>Math.pow(Math.abs(e),563/256)*Math.sign(e),mn=e=>{let t=yt(e.r),n=yt(e.g),o=yt(e.b),r={mode:"xyz65",x:.5766690429101305*t+.1855582379065463*n+.1882286462349947*o,y:.297344975250536*t+.6273635662554661*n+.0752914584939979*o,z:.0270313613864123*t+.0706888525358272*n+.9913375368376386*o};return e.alpha!==void 0&&(r.alpha=e.alpha),r},vt=e=>Math.pow(Math.abs(e),256/563)*Math.sign(e),bn=({x:e,y:t,z:n,alpha:o})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r={mode:"a98",r:vt(e*2.0415879038107465-t*.5650069742788597-.3447313507783297*n),g:vt(e*-.9692436362808798+t*1.8759675015077206+.0415550574071756*n),b:vt(e*.0134442806320312-t*.1183623922310184+1.0151749943912058*n)};return o!==void 0&&(r.alpha=o),r},$t=(e=0)=>{const t=Math.abs(e);return t<=.04045?e/12.92:(Math.sign(e)||1)*Math.pow((t+.055)/1.055,2.4)},Ee=({r:e,g:t,b:n,alpha:o})=>{let r={mode:"lrgb",r:$t(e),g:$t(t),b:$t(n)};return o!==void 0&&(r.alpha=o),r},ye=e=>{let{r:t,g:n,b:o,alpha:r}=Ee(e),s={mode:"xyz65",x:.4123907992659593*t+.357584339383878*n+.1804807884018343*o,y:.2126390058715102*t+.715168678767756*n+.0721923153607337*o,z:.0193308187155918*t+.119194779794626*n+.9505321522496607*o};return r!==void 0&&(s.alpha=r),s},wt=(e=0)=>{const t=Math.abs(e);return t>.0031308?(Math.sign(e)||1)*(1.055*Math.pow(t,1/2.4)-.055):e*12.92},Se=({r:e,g:t,b:n,alpha:o},r="rgb")=>{let s={mode:r,r:wt(e),g:wt(t),b:wt(n)};return o!==void 0&&(s.alpha=o),s},ve=({x:e,y:t,z:n,alpha:o})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r=Se({r:e*3.2409699419045226-t*1.537383177570094-.4986107602930034*n,g:e*-.9692436362808796+t*1.8759675015077204+.0415550574071756*n,b:e*.0556300796969936-t*.2039769588889765+1.0569715142428784*n});return o!==void 0&&(r.alpha=o),r},mo={...Re,mode:"a98",parse:["a98-rgb"],serialize:"a98-rgb",fromMode:{rgb:e=>bn(ye(e)),xyz65:bn},toMode:{rgb:e=>ve(mn(e)),xyz65:mn}},F=e=>(e=e%360)<0?e+360:e,bo=(e,t)=>e.map((n,o,r)=>{if(n===void 0)return n;let s=F(n);return o===0||e[o-1]===void 0?s:t(s-F(r[o-1]))}).reduce((n,o)=>!n.length||o===void 0||n[n.length-1]===void 0?(n.push(o),n):(n.push(o+n[n.length-1]),n),[]),oe=e=>bo(e,t=>Math.abs(t)<=180?t:t-360*Math.sign(t)),L=[-.14861,1.78277,-.29227,-.90649,1.97294,0],xo=Math.PI/180,Mo=180/Math.PI;let xn=L[3]*L[4],Mn=L[1]*L[4],yn=L[1]*L[2]-L[0]*L[3];const yo=({r:e,g:t,b:n,alpha:o})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r=(yn*n+e*xn-t*Mn)/(yn+xn-Mn),s=n-r,i=(L[4]*(t-r)-L[2]*s)/L[3],a={mode:"cubehelix",l:r,s:r===0||r===1?void 0:Math.sqrt(s*s+i*i)/(L[4]*r*(1-r))};return a.s&&(a.h=Math.atan2(i,s)*Mo-120),o!==void 0&&(a.alpha=o),a},vo=({h:e,s:t,l:n,alpha:o})=>{let r={mode:"rgb"};e=(e===void 0?0:e+120)*xo,n===void 0&&(n=0);let s=t===void 0?0:t*n*(1-n),i=Math.cos(e),a=Math.sin(e);return r.r=n+s*(L[0]*i+L[1]*a),r.g=n+s*(L[2]*i+L[3]*a),r.b=n+s*(L[4]*i+L[5]*a),o!==void 0&&(r.alpha=o),r},rt=(e,t)=>{if(e.h===void 0||t.h===void 0||!e.s||!t.s)return 0;let n=F(e.h),o=F(t.h),r=Math.sin((o-n+360)/2*Math.PI/180);return 2*Math.sqrt(e.s*t.s)*r},$o=(e,t)=>{if(e.h===void 0||t.h===void 0)return 0;let n=F(e.h),o=F(t.h);return Math.abs(o-n)>180?n-(o-360*Math.sign(o-n)):o-n},ot=(e,t)=>{if(e.h===void 0||t.h===void 0||!e.c||!t.c)return 0;let n=F(e.h),o=F(t.h),r=Math.sin((o-n+360)/2*Math.PI/180);return 2*Math.sqrt(e.c*t.c)*r},wo=(e=1,t=1,n=1)=>{let o=Me("lab65");return(r,s)=>{let i=o(r),a=o(s),d=i.l,u=i.a,h=i.b,b=Math.sqrt(u*u+h*h),m=a.l,p=a.a,M=a.b,v=Math.sqrt(p*p+M*M),$=(b+v)/2,x=.5*(1-Math.sqrt(Math.pow($,7)/(Math.pow($,7)+Math.pow(25,7)))),_=u*(1+x),C=p*(1+x),z=Math.sqrt(_*_+h*h),T=Math.sqrt(C*C+M*M),D=Math.abs(_)+Math.abs(h)===0?0:Math.atan2(h,_);D+=(D<0)*2*Math.PI;let X=Math.abs(C)+Math.abs(M)===0?0:Math.atan2(M,C);X+=(X<0)*2*Math.PI;let ue=m-d,ie=T-z,B=z*T===0?0:X-D;B-=(B>Math.PI)*2*Math.PI,B+=(B<-Math.PI)*2*Math.PI;let G=2*Math.sqrt(z*T)*Math.sin(B/2),he=(d+m)/2,pe=(z+T)/2,O;z*T===0?O=D+X:(O=(D+X)/2,O-=(Math.abs(D-X)>Math.PI)*Math.PI,O+=(O<0)*2*Math.PI);let We=Math.pow(he-50,2),Ve=1-.17*Math.cos(O-Math.PI/6)+.24*Math.cos(2*O)+.32*Math.cos(3*O+Math.PI/30)-.2*Math.cos(4*O-63*Math.PI/180),Le=1+.015*We/Math.sqrt(20+We),Ne=1+.045*pe,$e=1+.015*pe*Ve,mt=30*Math.PI/180*Math.exp(-1*Math.pow((180/Math.PI*O-275)/25,2)),Ye=2*Math.sqrt(Math.pow(pe,7)/(Math.pow(pe,7)+Math.pow(25,7))),Fe=-1*Math.sin(2*mt)*Ye;return Math.sqrt(Math.pow(ue/(e*Le),2)+Math.pow(ie/(t*Ne),2)+Math.pow(G/(n*$e),2)+Fe*ie/(t*Ne)*G/(n*$e))}},se=e=>{let t=e.reduce((o,r)=>{if(r!==void 0){let s=r*Math.PI/180;o.sin+=Math.sin(s),o.cos+=Math.cos(s)}return o},{sin:0,cos:0}),n=Math.atan2(t.sin,t.cos)*180/Math.PI;return n<0?360+n:n},ko={mode:"cubehelix",channels:["h","s","l","alpha"],parse:["--cubehelix"],serialize:"--cubehelix",ranges:{h:[0,360],s:[0,4.614],l:[0,1]},fromMode:{rgb:yo},toMode:{rgb:vo},interpolate:{h:{use:g,fixup:oe},s:g,l:g,alpha:{use:g,fixup:I}},difference:{h:rt},average:{h:se}},fe=({l:e,a:t,b:n,alpha:o},r="lch")=>{t===void 0&&(t=0),n===void 0&&(n=0);let s=Math.sqrt(t*t+n*n),i={mode:r,l:e,c:s};return s&&(i.h=F(Math.atan2(n,t)*180/Math.PI)),o!==void 0&&(i.alpha=o),i},ce=({l:e,c:t,h:n,alpha:o},r="lab")=>{n===void 0&&(n=0);let s={mode:r,l:e,a:t?t*Math.cos(n/180*Math.PI):0,b:t?t*Math.sin(n/180*Math.PI):0};return o!==void 0&&(s.alpha=o),s},Un=Math.pow(29,3)/Math.pow(3,3),Qn=Math.pow(6,3)/Math.pow(29,3),S={X:.3457/.3585,Y:1,Z:(1-.3457-.3585)/.3585},Pe={X:.3127/.329,Y:1,Z:(1-.3127-.329)/.329};let kt=e=>Math.pow(e,3)>Qn?Math.pow(e,3):(116*e-16)/Un;const er=({l:e,a:t,b:n,alpha:o})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r=(e+16)/116,s=t/500+r,i=r-n/200,a={mode:"xyz65",x:kt(s)*Pe.X,y:kt(r)*Pe.Y,z:kt(i)*Pe.Z};return o!==void 0&&(a.alpha=o),a},st=e=>ve(er(e)),_t=e=>e>Qn?Math.cbrt(e):(Un*e+16)/116,tr=({x:e,y:t,z:n,alpha:o})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r=_t(e/Pe.X),s=_t(t/Pe.Y),i=_t(n/Pe.Z),a={mode:"lab65",l:116*s-16,a:500*(r-s),b:200*(s-i)};return o!==void 0&&(a.alpha=o),a},it=e=>{let t=tr(ye(e));return e.r===e.b&&e.b===e.g&&(t.a=t.b=0),t},Qe=1,nr=1,qe=26/180*Math.PI,et=Math.cos(qe),tt=Math.sin(qe),rr=100/Math.log(139/100),Wt=({l:e,c:t,h:n,alpha:o})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r={mode:"lab65",l:(Math.exp(e*Qe/rr)-1)/.0039},s=(Math.exp(.0435*t*nr*Qe)-1)/.075,i=s*Math.cos(n/180*Math.PI-qe),a=s*Math.sin(n/180*Math.PI-qe);return r.a=i*et-a/.83*tt,r.b=i*tt+a/.83*et,o!==void 0&&(r.alpha=o),r},Vt=({l:e,a:t,b:n,alpha:o})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r=t*et+n*tt,s=.83*(n*et-t*tt),i=Math.sqrt(r*r+s*s),a={mode:"dlch",l:rr/Qe*Math.log(1+.0039*e),c:Math.log(1+.075*i)/(.0435*nr*Qe)};return a.c&&(a.h=F((Math.atan2(s,r)+qe)/Math.PI*180)),o!==void 0&&(a.alpha=o),a},vn=e=>Wt(fe(e,"dlch")),$n=e=>ce(Vt(e),"dlab"),_o={mode:"dlab",parse:["--din99o-lab"],serialize:"--din99o-lab",toMode:{lab65:vn,rgb:e=>st(vn(e))},fromMode:{lab65:$n,rgb:e=>$n(it(e))},channels:["l","a","b","alpha"],ranges:{l:[0,100],a:[-40.09,45.501],b:[-40.469,44.344]},interpolate:{l:g,a:g,b:g,alpha:{use:g,fixup:I}}},Po={mode:"dlch",parse:["--din99o-lch"],serialize:"--din99o-lch",toMode:{lab65:Wt,dlab:e=>ce(e,"dlab"),rgb:e=>st(Wt(e))},fromMode:{lab65:Vt,dlab:e=>fe(e,"dlch"),rgb:e=>Vt(it(e))},channels:["l","c","h","alpha"],ranges:{l:[0,100],c:[0,51.484],h:[0,360]},interpolate:{l:g,c:g,h:{use:g,fixup:oe},alpha:{use:g,fixup:I}},difference:{h:ot},average:{h:se}};function Co({h:e,s:t,i:n,alpha:o}){e=F(e!==void 0?e:0),t===void 0&&(t=0),n===void 0&&(n=0);let r=Math.abs(e/60%2-1),s;switch(Math.floor(e/60)){case 0:s={r:n*(1+t*(3/(2-r)-1)),g:n*(1+t*(3*(1-r)/(2-r)-1)),b:n*(1-t)};break;case 1:s={r:n*(1+t*(3*(1-r)/(2-r)-1)),g:n*(1+t*(3/(2-r)-1)),b:n*(1-t)};break;case 2:s={r:n*(1-t),g:n*(1+t*(3/(2-r)-1)),b:n*(1+t*(3*(1-r)/(2-r)-1))};break;case 3:s={r:n*(1-t),g:n*(1+t*(3*(1-r)/(2-r)-1)),b:n*(1+t*(3/(2-r)-1))};break;case 4:s={r:n*(1+t*(3*(1-r)/(2-r)-1)),g:n*(1-t),b:n*(1+t*(3/(2-r)-1))};break;case 5:s={r:n*(1+t*(3/(2-r)-1)),g:n*(1-t),b:n*(1+t*(3*(1-r)/(2-r)-1))};break;default:s={r:n*(1-t),g:n*(1-t),b:n*(1-t)}}return s.mode="rgb",o!==void 0&&(s.alpha=o),s}function zo({r:e,g:t,b:n,alpha:o}){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r=Math.max(e,t,n),s=Math.min(e,t,n),i={mode:"hsi",s:e+t+n===0?0:1-3*s/(e+t+n),i:(e+t+n)/3};return r-s!==0&&(i.h=(r===e?(t-n)/(r-s)+(t<n)*6:r===t?(n-e)/(r-s)+2:(e-t)/(r-s)+4)*60),o!==void 0&&(i.alpha=o),i}const To={mode:"hsi",toMode:{rgb:Co},parse:["--hsi"],serialize:"--hsi",fromMode:{rgb:zo},channels:["h","s","i","alpha"],ranges:{h:[0,360]},gamut:"rgb",interpolate:{h:{use:g,fixup:oe},s:g,i:g,alpha:{use:g,fixup:I}},difference:{h:rt},average:{h:se}};function Ro({h:e,s:t,l:n,alpha:o}){e=F(e!==void 0?e:0),t===void 0&&(t=0),n===void 0&&(n=0);let r=n+t*(n<.5?n:1-n),s=r-(r-n)*2*Math.abs(e/60%2-1),i;switch(Math.floor(e/60)){case 0:i={r,g:s,b:2*n-r};break;case 1:i={r:s,g:r,b:2*n-r};break;case 2:i={r:2*n-r,g:r,b:s};break;case 3:i={r:2*n-r,g:s,b:r};break;case 4:i={r:s,g:2*n-r,b:r};break;case 5:i={r,g:2*n-r,b:s};break;default:i={r:2*n-r,g:2*n-r,b:2*n-r}}return i.mode="rgb",o!==void 0&&(i.alpha=o),i}function Eo({r:e,g:t,b:n,alpha:o}){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r=Math.max(e,t,n),s=Math.min(e,t,n),i={mode:"hsl",s:r===s?0:(r-s)/(1-Math.abs(r+s-1)),l:.5*(r+s)};return r-s!==0&&(i.h=(r===e?(t-n)/(r-s)+(t<n)*6:r===t?(n-e)/(r-s)+2:(e-t)/(r-s)+4)*60),o!==void 0&&(i.alpha=o),i}const So=(e,t)=>{switch(t){case"deg":return+e;case"rad":return e/Math.PI*180;case"grad":return e/10*9;case"turn":return e*360}},Io=new RegExp(`^hsla?\\(\\s*${Gr}${ze}${Ae}${ze}${Ae}\\s*(?:,\\s*${rn}\\s*)?\\)$`),Lo=e=>{let t=e.match(Io);if(!t)return;let n={mode:"hsl"};return t[3]!==void 0?n.h=+t[3]:t[1]!==void 0&&t[2]!==void 0&&(n.h=So(t[1],t[2])),t[4]!==void 0&&(n.s=Math.min(Math.max(0,t[4]/100),1)),t[5]!==void 0&&(n.l=Math.min(Math.max(0,t[5]/100),1)),t[6]!==void 0?n.alpha=Math.max(0,Math.min(1,t[6]/100)):t[7]!==void 0&&(n.alpha=Math.max(0,Math.min(1,+t[7]))),n};function No(e,t){if(!t||t[0]!=="hsl"&&t[0]!=="hsla")return;const n={mode:"hsl"},[,o,r,s,i]=t;if(o.type!==c.None){if(o.type===c.Percentage)return;n.h=o.value}if(r.type!==c.None){if(r.type===c.Hue)return;n.s=r.value/100}if(s.type!==c.None){if(s.type===c.Hue)return;n.l=s.value/100}return i.type!==c.None&&(n.alpha=Math.min(1,Math.max(0,i.type===c.Number?i.value:i.value/100))),n}const or={mode:"hsl",toMode:{rgb:Ro},fromMode:{rgb:Eo},channels:["h","s","l","alpha"],ranges:{h:[0,360]},gamut:"rgb",parse:[No,Lo],serialize:e=>`hsl(${e.h!==void 0?e.h:"none"} ${e.s!==void 0?e.s*100+"%":"none"} ${e.l!==void 0?e.l*100+"%":"none"}${e.alpha<1?` / ${e.alpha}`:""})`,interpolate:{h:{use:g,fixup:oe},s:g,l:g,alpha:{use:g,fixup:I}},difference:{h:rt},average:{h:se}};function sr({h:e,s:t,v:n,alpha:o}){e=F(e!==void 0?e:0),t===void 0&&(t=0),n===void 0&&(n=0);let r=Math.abs(e/60%2-1),s;switch(Math.floor(e/60)){case 0:s={r:n,g:n*(1-t*r),b:n*(1-t)};break;case 1:s={r:n*(1-t*r),g:n,b:n*(1-t)};break;case 2:s={r:n*(1-t),g:n,b:n*(1-t*r)};break;case 3:s={r:n*(1-t),g:n*(1-t*r),b:n};break;case 4:s={r:n*(1-t*r),g:n*(1-t),b:n};break;case 5:s={r:n,g:n*(1-t),b:n*(1-t*r)};break;default:s={r:n*(1-t),g:n*(1-t),b:n*(1-t)}}return s.mode="rgb",o!==void 0&&(s.alpha=o),s}function ir({r:e,g:t,b:n,alpha:o}){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r=Math.max(e,t,n),s=Math.min(e,t,n),i={mode:"hsv",s:r===0?0:1-s/r,v:r};return r-s!==0&&(i.h=(r===e?(t-n)/(r-s)+(t<n)*6:r===t?(n-e)/(r-s)+2:(e-t)/(r-s)+4)*60),o!==void 0&&(i.alpha=o),i}const ar={mode:"hsv",toMode:{rgb:sr},parse:["--hsv"],serialize:"--hsv",fromMode:{rgb:ir},channels:["h","s","v","alpha"],ranges:{h:[0,360]},gamut:"rgb",interpolate:{h:{use:g,fixup:oe},s:g,v:g,alpha:{use:g,fixup:I}},difference:{h:rt},average:{h:se}};function Fo({h:e,w:t,b:n,alpha:o}){if(t===void 0&&(t=0),n===void 0&&(n=0),t+n>1){let r=t+n;t/=r,n/=r}return sr({h:e,s:n===1?1:1-t/(1-n),v:1-n,alpha:o})}function Ho(e){let t=ir(e);if(t===void 0)return;let n=t.s!==void 0?t.s:0,o=t.v!==void 0?t.v:0,r={mode:"hwb",w:(1-n)*o,b:1-o};return t.h!==void 0&&(r.h=t.h),t.alpha!==void 0&&(r.alpha=t.alpha),r}function jo(e,t){if(!t||t[0]!=="hwb")return;const n={mode:"hwb"},[,o,r,s,i]=t;if(o.type!==c.None){if(o.type===c.Percentage)return;n.h=o.value}if(r.type!==c.None){if(r.type===c.Hue)return;n.w=r.value/100}if(s.type!==c.None){if(s.type===c.Hue)return;n.b=s.value/100}return i.type!==c.None&&(n.alpha=Math.min(1,Math.max(0,i.type===c.Number?i.value:i.value/100))),n}const Ao={mode:"hwb",toMode:{rgb:Fo},fromMode:{rgb:Ho},channels:["h","w","b","alpha"],ranges:{h:[0,360]},gamut:"rgb",parse:[jo],serialize:e=>`hwb(${e.h!==void 0?e.h:"none"} ${e.w!==void 0?e.w*100+"%":"none"} ${e.b!==void 0?e.b*100+"%":"none"}${e.alpha<1?` / ${e.alpha}`:""})`,interpolate:{h:{use:g,fixup:oe},w:g,b:g,alpha:{use:g,fixup:I}},difference:{h:$o},average:{h:se}},lr=203,at=.1593017578125,dr=78.84375,lt=.8359375,dt=18.8515625,ft=18.6875;function Pt(e){if(e<0)return 0;const t=Math.pow(e,1/dr);return 1e4*Math.pow(Math.max(0,t-lt)/(dt-ft*t),1/at)}function Ct(e){if(e<0)return 0;const t=Math.pow(e/1e4,at);return Math.pow((lt+dt*t)/(1+ft*t),dr)}const zt=e=>Math.max(e/lr,0),wn=({i:e,t,p:n,alpha:o})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);const r=Pt(e+.008609037037932761*t+.11102962500302593*n),s=Pt(e-.00860903703793275*t-.11102962500302599*n),i=Pt(e+.5600313357106791*t-.32062717498731885*n),a={mode:"xyz65",x:zt(2.070152218389422*r-1.3263473389671556*s+.2066510476294051*i),y:zt(.3647385209748074*r+.680566024947227*s-.0453045459220346*i),z:zt(-.049747207535812*r-.0492609666966138*s+1.1880659249923042*i)};return o!==void 0&&(a.alpha=o),a},Tt=(e=0)=>Math.max(e*lr,0),kn=({x:e,y:t,z:n,alpha:o})=>{const r=Tt(e),s=Tt(t),i=Tt(n),a=Ct(.3592832590121217*r+.6976051147779502*s-.0358915932320289*i),d=Ct(-.1920808463704995*r+1.1004767970374323*s+.0753748658519118*i),u=Ct(.0070797844607477*r+.0748396662186366*s+.8433265453898765*i),h=.5*a+.5*d,b=1.61376953125*a-3.323486328125*d+1.709716796875*u,m=4.378173828125*a-4.24560546875*d-.132568359375*u,p={mode:"itp",i:h,t:b,p:m};return o!==void 0&&(p.alpha=o),p},qo={mode:"itp",channels:["i","t","p","alpha"],parse:["--ictcp"],serialize:"--ictcp",toMode:{xyz65:wn,rgb:e=>ve(wn(e))},fromMode:{xyz65:kn,rgb:e=>kn(ye(e))},ranges:{i:[0,.581],t:[-.369,.272],p:[-.164,.331]},interpolate:{i:g,t:g,p:g,alpha:{use:g,fixup:I}}},Do=134.03437499999998,Oo=16295499532821565e-27,Rt=e=>{if(e<0)return 0;let t=Math.pow(e/1e4,at);return Math.pow((lt+dt*t)/(1+ft*t),Do)},Et=(e=0)=>Math.max(e*203,0),fr=({x:e,y:t,z:n,alpha:o})=>{e=Et(e),t=Et(t),n=Et(n);let r=1.15*e-.15*n,s=.66*t+.34*e,i=Rt(.41478972*r+.579999*s+.014648*n),a=Rt(-.20151*r+1.120649*s+.0531008*n),d=Rt(-.0166008*r+.2648*s+.6684799*n),u=(i+a)/2,h={mode:"jab",j:.44*u/(1-.56*u)-Oo,a:3.524*i-4.066708*a+.542708*d,b:.199076*i+1.096799*a-1.295875*d};return o!==void 0&&(h.alpha=o),h},Xo=134.03437499999998,_n=16295499532821565e-27,St=e=>{if(e<0)return 0;let t=Math.pow(e,1/Xo);return 1e4*Math.pow((lt-t)/(ft*t-dt),1/at)},It=e=>e/203,cr=({j:e,a:t,b:n,alpha:o})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r=(e+_n)/(.44+.56*(e+_n)),s=St(r+.13860504*t+.058047316*n),i=St(r-.13860504*t-.058047316*n),a=St(r-.096019242*t-.8118919*n),d={mode:"xyz65",x:It(1.661373024652174*s-.914523081304348*i+.23136208173913045*a),y:It(-.3250758611844533*s+1.571847026732543*i-.21825383453227928*a),z:It(-.090982811*s-.31272829*i+1.5227666*a)};return o!==void 0&&(d.alpha=o),d},ur=e=>{let t=fr(ye(e));return e.r===e.b&&e.b===e.g&&(t.a=t.b=0),t},hr=e=>ve(cr(e)),Bo={mode:"jab",channels:["j","a","b","alpha"],parse:["--jzazbz"],serialize:"--jzazbz",fromMode:{rgb:ur,xyz65:fr},toMode:{rgb:hr,xyz65:cr},ranges:{j:[0,.222],a:[-.109,.129],b:[-.185,.134]},interpolate:{j:g,a:g,b:g,alpha:{use:g,fixup:I}}},Pn=({j:e,a:t,b:n,alpha:o})=>{t===void 0&&(t=0),n===void 0&&(n=0);let r=Math.sqrt(t*t+n*n),s={mode:"jch",j:e,c:r};return r&&(s.h=F(Math.atan2(n,t)*180/Math.PI)),o!==void 0&&(s.alpha=o),s},Cn=({j:e,c:t,h:n,alpha:o})=>{n===void 0&&(n=0);let r={mode:"jab",j:e,a:t?t*Math.cos(n/180*Math.PI):0,b:t?t*Math.sin(n/180*Math.PI):0};return o!==void 0&&(r.alpha=o),r},Wo={mode:"jch",parse:["--jzczhz"],serialize:"--jzczhz",toMode:{jab:Cn,rgb:e=>hr(Cn(e))},fromMode:{rgb:e=>Pn(ur(e)),jab:Pn},channels:["j","c","h","alpha"],ranges:{j:[0,.221],c:[0,.19],h:[0,360]},interpolate:{h:{use:g,fixup:oe},c:g,j:g,alpha:{use:g,fixup:I}},difference:{h:ot},average:{h:se}},ct=Math.pow(29,3)/Math.pow(3,3),on=Math.pow(6,3)/Math.pow(29,3);let Lt=e=>Math.pow(e,3)>on?Math.pow(e,3):(116*e-16)/ct;const sn=({l:e,a:t,b:n,alpha:o})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r=(e+16)/116,s=t/500+r,i=r-n/200,a={mode:"xyz50",x:Lt(s)*S.X,y:Lt(r)*S.Y,z:Lt(i)*S.Z};return o!==void 0&&(a.alpha=o),a},Oe=({x:e,y:t,z:n,alpha:o})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r=Se({r:e*3.1341359569958707-t*1.6173863321612538-.4906619460083532*n,g:e*-.978795502912089+t*1.916254567259524+.03344273116131949*n,b:e*.07195537988411677-t*.2289768264158322+1.405386058324125*n});return o!==void 0&&(r.alpha=o),r},pr=e=>Oe(sn(e)),Xe=e=>{let{r:t,g:n,b:o,alpha:r}=Ee(e),s={mode:"xyz50",x:.436065742824811*t+.3851514688337912*n+.14307845442264197*o,y:.22249319175623702*t+.7168870538238823*n+.06061979053616537*o,z:.013923904500943465*t+.09708128566574634*n+.7140993584005155*o};return r!==void 0&&(s.alpha=r),s},Nt=e=>e>on?Math.cbrt(e):(ct*e+16)/116,an=({x:e,y:t,z:n,alpha:o})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r=Nt(e/S.X),s=Nt(t/S.Y),i=Nt(n/S.Z),a={mode:"lab",l:116*s-16,a:500*(r-s),b:200*(s-i)};return o!==void 0&&(a.alpha=o),a},gr=e=>{let t=an(Xe(e));return e.r===e.b&&e.b===e.g&&(t.a=t.b=0),t};function Vo(e,t){if(!t||t[0]!=="lab")return;const n={mode:"lab"},[,o,r,s,i]=t;if(!(o.type===c.Hue||r.type===c.Hue||s.type===c.Hue))return o.type!==c.None&&(n.l=Math.min(Math.max(0,o.value),100)),r.type!==c.None&&(n.a=r.type===c.Number?r.value:r.value*125/100),s.type!==c.None&&(n.b=s.type===c.Number?s.value:s.value*125/100),i.type!==c.None&&(n.alpha=Math.min(1,Math.max(0,i.type===c.Number?i.value:i.value/100))),n}const ln={mode:"lab",toMode:{xyz50:sn,rgb:pr},fromMode:{xyz50:an,rgb:gr},channels:["l","a","b","alpha"],ranges:{l:[0,100],a:[-100,100],b:[-100,100]},parse:[Vo],serialize:e=>`lab(${e.l!==void 0?e.l:"none"} ${e.a!==void 0?e.a:"none"} ${e.b!==void 0?e.b:"none"}${e.alpha<1?` / ${e.alpha}`:""})`,interpolate:{l:g,a:g,b:g,alpha:{use:g,fixup:I}}},Yo={...ln,mode:"lab65",parse:["--lab-d65"],serialize:"--lab-d65",toMode:{xyz65:er,rgb:st},fromMode:{xyz65:tr,rgb:it},ranges:{l:[0,100],a:[-86.182,98.234],b:[-107.86,94.477]}};function Ko(e,t){if(!t||t[0]!=="lch")return;const n={mode:"lch"},[,o,r,s,i]=t;if(o.type!==c.None){if(o.type===c.Hue)return;n.l=Math.min(Math.max(0,o.value),100)}if(r.type!==c.None&&(n.c=Math.max(0,r.type===c.Number?r.value:r.value*150/100)),s.type!==c.None){if(s.type===c.Percentage)return;n.h=s.value}return i.type!==c.None&&(n.alpha=Math.min(1,Math.max(0,i.type===c.Number?i.value:i.value/100))),n}const dn={mode:"lch",toMode:{lab:ce,rgb:e=>pr(ce(e))},fromMode:{rgb:e=>fe(gr(e)),lab:fe},channels:["l","c","h","alpha"],ranges:{l:[0,100],c:[0,150],h:[0,360]},parse:[Ko],serialize:e=>`lch(${e.l!==void 0?e.l:"none"} ${e.c!==void 0?e.c:"none"} ${e.h!==void 0?e.h:"none"}${e.alpha<1?` / ${e.alpha}`:""})`,interpolate:{h:{use:g,fixup:oe},c:g,l:g,alpha:{use:g,fixup:I}},difference:{h:ot},average:{h:se}},Zo={...dn,mode:"lch65",parse:["--lch-d65"],serialize:"--lch-d65",toMode:{lab65:e=>ce(e,"lab65"),rgb:e=>st(ce(e,"lab65"))},fromMode:{rgb:e=>fe(it(e),"lch65"),lab65:e=>fe(e,"lch65")},ranges:{l:[0,100],c:[0,133.807],h:[0,360]}},mr=({l:e,u:t,v:n,alpha:o})=>{t===void 0&&(t=0),n===void 0&&(n=0);let r=Math.sqrt(t*t+n*n),s={mode:"lchuv",l:e,c:r};return r&&(s.h=F(Math.atan2(n,t)*180/Math.PI)),o!==void 0&&(s.alpha=o),s},br=({l:e,c:t,h:n,alpha:o})=>{n===void 0&&(n=0);let r={mode:"luv",l:e,u:t?t*Math.cos(n/180*Math.PI):0,v:t?t*Math.sin(n/180*Math.PI):0};return o!==void 0&&(r.alpha=o),r},xr=(e,t,n)=>4*e/(e+15*t+3*n),Mr=(e,t,n)=>9*t/(e+15*t+3*n),Jo=xr(S.X,S.Y,S.Z),Go=Mr(S.X,S.Y,S.Z),Uo=e=>e<=on?ct*e:116*Math.cbrt(e)-16,Yt=({x:e,y:t,z:n,alpha:o})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r=Uo(t/S.Y),s=xr(e,t,n),i=Mr(e,t,n);!isFinite(s)||!isFinite(i)?r=s=i=0:(s=13*r*(s-Jo),i=13*r*(i-Go));let a={mode:"luv",l:r,u:s,v:i};return o!==void 0&&(a.alpha=o),a},Qo=(e,t,n)=>4*e/(e+15*t+3*n),es=(e,t,n)=>9*t/(e+15*t+3*n),ts=Qo(S.X,S.Y,S.Z),ns=es(S.X,S.Y,S.Z),Kt=({l:e,u:t,v:n,alpha:o})=>{if(e===void 0&&(e=0),e===0)return{mode:"xyz50",x:0,y:0,z:0};t===void 0&&(t=0),n===void 0&&(n=0);let r=t/(13*e)+ts,s=n/(13*e)+ns,i=S.Y*(e<=8?e/ct:Math.pow((e+16)/116,3)),a=i*(9*r)/(4*s),d=i*(12-3*r-20*s)/(4*s),u={mode:"xyz50",x:a,y:i,z:d};return o!==void 0&&(u.alpha=o),u},rs=e=>mr(Yt(Xe(e))),os=e=>Oe(Kt(br(e))),ss={mode:"lchuv",toMode:{luv:br,rgb:os},fromMode:{rgb:rs,luv:mr},channels:["l","c","h","alpha"],parse:["--lchuv"],serialize:"--lchuv",ranges:{l:[0,100],c:[0,176.956],h:[0,360]},interpolate:{h:{use:g,fixup:oe},c:g,l:g,alpha:{use:g,fixup:I}},difference:{h:ot},average:{h:se}},is={...Re,mode:"lrgb",toMode:{rgb:Se},fromMode:{rgb:Ee},parse:["srgb-linear"],serialize:"srgb-linear"},as={mode:"luv",toMode:{xyz50:Kt,rgb:e=>Oe(Kt(e))},fromMode:{xyz50:Yt,rgb:e=>Yt(Xe(e))},channels:["l","u","v","alpha"],parse:["--luv"],serialize:"--luv",ranges:{l:[0,100],u:[-84.936,175.042],v:[-125.882,87.243]},interpolate:{l:g,u:g,v:g,alpha:{use:g,fixup:I}}},yr=({r:e,g:t,b:n,alpha:o})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r=Math.cbrt(.41222147079999993*e+.5363325363*t+.0514459929*n),s=Math.cbrt(.2119034981999999*e+.6806995450999999*t+.1073969566*n),i=Math.cbrt(.08830246189999998*e+.2817188376*t+.6299787005000002*n),a={mode:"oklab",l:.2104542553*r+.793617785*s-.0040720468*i,a:1.9779984951*r-2.428592205*s+.4505937099*i,b:.0259040371*r+.7827717662*s-.808675766*i};return o!==void 0&&(a.alpha=o),a},ut=e=>{let t=yr(Ee(e));return e.r===e.b&&e.b===e.g&&(t.a=t.b=0),t},Be=({l:e,a:t,b:n,alpha:o})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r=Math.pow(e*.9999999984505198+.39633779217376786*t+.2158037580607588*n,3),s=Math.pow(e*1.0000000088817609-.10556134232365635*t-.06385417477170591*n,3),i=Math.pow(e*1.0000000546724108-.08948418209496575*t-1.2914855378640917*n,3),a={mode:"lrgb",r:4.076741661347994*r-3.307711590408193*s+.230969928729428*i,g:-1.2684380040921763*r+2.6097574006633715*s-.3413193963102197*i,b:-.004196086541837188*r-.7034186144594493*s+1.7076147009309444*i};return o!==void 0&&(a.alpha=o),a},ht=e=>Se(Be(e));function Zt(e){const o=1.170873786407767;return .5*(o*e-.206+Math.sqrt((o*e-.206)*(o*e-.206)+4*.03*o*e))}function nt(e){return(e*e+.206*e)/(1.170873786407767*(e+.03))}function ls(e,t){let n,o,r,s,i,a,d,u;-1.88170328*e-.80936493*t>1?(n=1.19086277,o=1.76576728,r=.59662641,s=.75515197,i=.56771245,a=4.0767416621,d=-3.3077115913,u=.2309699292):1.81444104*e-1.19445276*t>1?(n=.73956515,o=-.45954404,r=.08285427,s=.1254107,i=.14503204,a=-1.2684380046,d=2.6097574011,u=-.3413193965):(n=1.35733652,o=-.00915799,r=-1.1513021,s=-.50559606,i=.00692167,a=-.0041960863,d=-.7034186147,u=1.707614701);let h=n+o*e+r*t+s*e*e+i*e*t,b=.3963377774*e+.2158037573*t,m=-.1055613458*e-.0638541728*t,p=-.0894841775*e-1.291485548*t;{let M=1+h*b,v=1+h*m,$=1+h*p,x=M*M*M,_=v*v*v,C=$*$*$,z=3*b*M*M,T=3*m*v*v,D=3*p*$*$,X=6*b*b*M,ue=6*m*m*v,ie=6*p*p*$,B=a*x+d*_+u*C,G=a*z+d*T+u*D,he=a*X+d*ue+u*ie;h=h-B*G/(G*G-.5*B*he)}return h}function fn(e,t){let n=ls(e,t),o=Be({l:1,a:n*e,b:n*t}),r=Math.cbrt(1/Math.max(o.r,o.g,o.b)),s=r*n;return[r,s]}function ds(e,t,n,o,r,s=null){s||(s=fn(e,t));let i;if((n-r)*s[1]-(s[0]-r)*o<=0)i=s[1]*r/(o*s[0]+s[1]*(r-n));else{i=s[1]*(r-1)/(o*(s[0]-1)+s[1]*(r-n));{let a=n-r,d=o,u=.3963377774*e+.2158037573*t,h=-.1055613458*e-.0638541728*t,b=-.0894841775*e-1.291485548*t,m=a+d*u,p=a+d*h,M=a+d*b;{let v=r*(1-i)+i*n,$=i*o,x=v+$*u,_=v+$*h,C=v+$*b,z=x*x*x,T=_*_*_,D=C*C*C,X=3*m*x*x,ue=3*p*_*_,ie=3*M*C*C,B=6*m*m*x,G=6*p*p*_,he=6*M*M*C,pe=4.0767416621*z-3.3077115913*T+.2309699292*D-1,O=4.0767416621*X-3.3077115913*ue+.2309699292*ie,We=4.0767416621*B-3.3077115913*G+.2309699292*he,Ve=O/(O*O-.5*pe*We),Le=-pe*Ve,Ne=-1.2684380046*z+2.6097574011*T-.3413193965*D-1,$e=-1.2684380046*X+2.6097574011*ue-.3413193965*ie,mt=-1.2684380046*B+2.6097574011*G-.3413193965*he,Ye=$e/($e*$e-.5*Ne*mt),Fe=-Ne*Ye,hn=-.0041960863*z-.7034186147*T+1.707614701*D-1,bt=-.0041960863*X-.7034186147*ue+1.707614701*ie,Vr=-.0041960863*B-.7034186147*G+1.707614701*he,pn=bt/(bt*bt-.5*hn*Vr),xt=-hn*pn;Le=Ve>=0?Le:1e6,Fe=Ye>=0?Fe:1e6,xt=pn>=0?xt:1e6,i+=Math.min(Le,Math.min(Fe,xt))}}}return i}function cn(e,t,n=null){n||(n=fn(e,t));let o=n[0],r=n[1];return[r/o,r/(1-o)]}function vr(e,t,n){let o=fn(t,n),r=ds(t,n,e,1,e,o),s=cn(t,n,o),i=.11516993+1/(7.4477897+4.1590124*n+t*(-2.19557347+1.75198401*n+t*(-2.13704948-10.02301043*n+t*(-4.24894561+5.38770819*n+4.69891013*t)))),a=.11239642+1/(1.6132032-.68124379*n+t*(.40370612+.90148123*n+t*(-.27087943+.6122399*n+t*(.00299215-.45399568*n-.14661872*t)))),d=r/Math.min(e*s[0],(1-e)*s[1]),u=e*i,h=(1-e)*a,b=.9*d*Math.sqrt(Math.sqrt(1/(1/(u*u*u*u)+1/(h*h*h*h))));return u=e*.4,h=(1-e)*.8,[Math.sqrt(1/(1/(u*u)+1/(h*h))),b,r]}function zn(e){const t=e.l!==void 0?e.l:0,n=e.a!==void 0?e.a:0,o=e.b!==void 0?e.b:0,r={mode:"okhsl",l:Zt(t)};e.alpha!==void 0&&(r.alpha=e.alpha);let s=Math.sqrt(n*n+o*o);if(!s)return r.s=0,r;let[i,a,d]=vr(t,n/s,o/s),u;if(s<a){let h=0,b=.8*i,m=1-b/a;u=(s-h)/(b+m*(s-h))*.8}else{let h=a,b=.2*a*a*1.25*1.25/i,m=1-b/(d-a);u=.8+.2*((s-h)/(b+m*(s-h)))}return u&&(r.s=u,r.h=F(Math.atan2(o,n)*180/Math.PI)),r}function Tn(e){let t=e.h!==void 0?e.h:0,n=e.s!==void 0?e.s:0,o=e.l!==void 0?e.l:0;const r={mode:"oklab",l:nt(o)};if(e.alpha!==void 0&&(r.alpha=e.alpha),!n||o===1)return r.a=r.b=0,r;let s=Math.cos(t/180*Math.PI),i=Math.sin(t/180*Math.PI),[a,d,u]=vr(r.l,s,i),h,b,m,p;n<.8?(h=1.25*n,b=0,m=.8*a,p=1-m/d):(h=5*(n-.8),b=d,m=.2*d*d*1.25*1.25/a,p=1-m/(u-d));let M=b+h*m/(1-p*h);return r.a=M*s,r.b=M*i,r}const fs={...or,mode:"okhsl",channels:["h","s","l","alpha"],parse:["--okhsl"],serialize:"--okhsl",fromMode:{oklab:zn,rgb:e=>zn(ut(e))},toMode:{oklab:Tn,rgb:e=>ht(Tn(e))}};function Rn(e){let t=e.l!==void 0?e.l:0,n=e.a!==void 0?e.a:0,o=e.b!==void 0?e.b:0,r=Math.sqrt(n*n+o*o),s=r?n/r:1,i=r?o/r:1,[a,d]=cn(s,i),u=.5,h=1-u/a,b=d/(r+t*d),m=b*t,p=b*r,M=nt(m),v=p*M/m,$=Be({l:M,a:s*v,b:i*v}),x=Math.cbrt(1/Math.max($.r,$.g,$.b,0));t=t/x,r=r/x*Zt(t)/t,t=Zt(t);const _={mode:"okhsv",s:r?(u+d)*p/(d*u+d*h*p):0,v:t?t/m:0};return _.s&&(_.h=F(Math.atan2(o,n)*180/Math.PI)),e.alpha!==void 0&&(_.alpha=e.alpha),_}function En(e){const t={mode:"oklab"};e.alpha!==void 0&&(t.alpha=e.alpha);const n=e.h!==void 0?e.h:0,o=e.s!==void 0?e.s:0,r=e.v!==void 0?e.v:0,s=Math.cos(n/180*Math.PI),i=Math.sin(n/180*Math.PI),[a,d]=cn(s,i),u=.5,h=1-u/a,b=1-o*u/(u+d-d*h*o),m=o*d*u/(u+d-d*h*o),p=nt(b),M=m*p/b,v=Be({l:p,a:s*M,b:i*M}),$=Math.cbrt(1/Math.max(v.r,v.g,v.b,0)),x=nt(r*b),_=m*x/b;return t.l=x*$,t.a=_*s*$,t.b=_*i*$,t}const cs={...ar,mode:"okhsv",channels:["h","s","v","alpha"],parse:["--okhsv"],serialize:"--okhsv",fromMode:{oklab:Rn,rgb:e=>Rn(ut(e))},toMode:{oklab:En,rgb:e=>ht(En(e))}};function us(e,t){if(!t||t[0]!=="oklab")return;const n={mode:"oklab"},[,o,r,s,i]=t;if(!(o.type===c.Hue||r.type===c.Hue||s.type===c.Hue))return o.type!==c.None&&(n.l=Math.min(Math.max(0,o.type===c.Number?o.value:o.value/100),1)),r.type!==c.None&&(n.a=r.type===c.Number?r.value:r.value*.4/100),s.type!==c.None&&(n.b=s.type===c.Number?s.value:s.value*.4/100),i.type!==c.None&&(n.alpha=Math.min(1,Math.max(0,i.type===c.Number?i.value:i.value/100))),n}const hs={...ln,mode:"oklab",toMode:{lrgb:Be,rgb:ht},fromMode:{lrgb:yr,rgb:ut},ranges:{l:[0,1],a:[-.4,.4],b:[-.4,.4]},parse:[us],serialize:e=>`oklab(${e.l!==void 0?e.l:"none"} ${e.a!==void 0?e.a:"none"} ${e.b!==void 0?e.b:"none"}${e.alpha<1?` / ${e.alpha}`:""})`};function ps(e,t){if(!t||t[0]!=="oklch")return;const n={mode:"oklch"},[,o,r,s,i]=t;if(o.type!==c.None){if(o.type===c.Hue)return;n.l=Math.min(Math.max(0,o.type===c.Number?o.value:o.value/100),1)}if(r.type!==c.None&&(n.c=Math.max(0,r.type===c.Number?r.value:r.value*.4/100)),s.type!==c.None){if(s.type===c.Percentage)return;n.h=s.value}return i.type!==c.None&&(n.alpha=Math.min(1,Math.max(0,i.type===c.Number?i.value:i.value/100))),n}const gs={...dn,mode:"oklch",toMode:{oklab:e=>ce(e,"oklab"),rgb:e=>ht(ce(e,"oklab"))},fromMode:{rgb:e=>fe(ut(e),"oklch"),oklab:e=>fe(e,"oklch")},parse:[ps],serialize:e=>`oklch(${e.l!==void 0?e.l:"none"} ${e.c!==void 0?e.c:"none"} ${e.h!==void 0?e.h:"none"}${e.alpha<1?` / ${e.alpha}`:""})`,ranges:{l:[0,1],c:[0,.4],h:[0,360]}},Sn=e=>{let{r:t,g:n,b:o,alpha:r}=Ee(e),s={mode:"xyz65",x:.486570948648216*t+.265667693169093*n+.1982172852343625*o,y:.2289745640697487*t+.6917385218365062*n+.079286914093745*o,z:0*t+.0451133818589026*n+1.043944368900976*o};return r!==void 0&&(s.alpha=r),s},In=({x:e,y:t,z:n,alpha:o})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r=Se({r:e*2.4934969119414263-t*.9313836179191242-.402710784450717*n,g:e*-.8294889695615749+t*1.7626640603183465+.0236246858419436*n,b:e*.0358458302437845-t*.0761723892680418+.9568845240076871*n},"p3");return o!==void 0&&(r.alpha=o),r},ms={...Re,mode:"p3",parse:["display-p3"],serialize:"display-p3",fromMode:{rgb:e=>In(ye(e)),xyz65:In},toMode:{rgb:e=>ve(Sn(e)),xyz65:Sn}},Ft=e=>{let t=Math.abs(e);return t>=1/512?Math.sign(e)*Math.pow(t,1/1.8):16*e},Ln=({x:e,y:t,z:n,alpha:o})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r={mode:"prophoto",r:Ft(e*1.3457868816471585-t*.2555720873797946-.0511018649755453*n),g:Ft(e*-.5446307051249019+t*1.5082477428451466+.0205274474364214*n),b:Ft(e*0+t*0+1.2119675456389452*n)};return o!==void 0&&(r.alpha=o),r},Ht=(e=0)=>{let t=Math.abs(e);return t>=16/512?Math.sign(e)*Math.pow(t,1.8):e/16},Nn=e=>{let t=Ht(e.r),n=Ht(e.g),o=Ht(e.b),r={mode:"xyz50",x:.7977666449006423*t+.1351812974005331*n+.0313477341283922*o,y:.2880748288194013*t+.7118352342418731*n+899369387256e-16*o,z:0*t+0*n+.8251046025104602*o};return e.alpha!==void 0&&(r.alpha=e.alpha),r},bs={...Re,mode:"prophoto",parse:["prophoto-rgb"],serialize:"prophoto-rgb",fromMode:{xyz50:Ln,rgb:e=>Ln(Xe(e))},toMode:{xyz50:Nn,rgb:e=>Oe(Nn(e))}},Fn=1.09929682680944,xs=.018053968510807,jt=e=>{const t=Math.abs(e);return t>xs?(Math.sign(e)||1)*(Fn*Math.pow(t,.45)-(Fn-1)):4.5*e},Hn=({x:e,y:t,z:n,alpha:o})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r={mode:"rec2020",r:jt(e*1.7166511879712683-t*.3556707837763925-.2533662813736599*n),g:jt(e*-.6666843518324893+t*1.6164812366349395+.0157685458139111*n),b:jt(e*.0176398574453108-t*.0427706132578085+.9421031212354739*n)};return o!==void 0&&(r.alpha=o),r},jn=1.09929682680944,Ms=.018053968510807,At=(e=0)=>{let t=Math.abs(e);return t<Ms*4.5?e/4.5:(Math.sign(e)||1)*Math.pow((t+jn-1)/jn,1/.45)},An=e=>{let t=At(e.r),n=At(e.g),o=At(e.b),r={mode:"xyz65",x:.6369580483012911*t+.1446169035862083*n+.1688809751641721*o,y:.262700212011267*t+.6779980715188708*n+.059301716469862*o,z:0*t+.0280726930490874*n+1.0609850577107909*o};return e.alpha!==void 0&&(r.alpha=e.alpha),r},ys={...Re,mode:"rec2020",fromMode:{xyz65:Hn,rgb:e=>Hn(ye(e))},toMode:{xyz65:An,rgb:e=>ve(An(e))},parse:["rec2020"],serialize:"rec2020"},xe=.0037930732552754493,$r=Math.cbrt(xe),qt=e=>Math.cbrt(e)-$r,vs=e=>{const{r:t,g:n,b:o,alpha:r}=Ee(e),s=qt(.3*t+.622*n+.078*o+xe),i=qt(.23*t+.692*n+.078*o+xe),a=qt(.2434226892454782*t+.2047674442449682*n+.5518098665095535*o+xe),d={mode:"xyb",x:(s-i)/2,y:(s+i)/2,b:a-(s+i)/2};return r!==void 0&&(d.alpha=r),d},Dt=e=>Math.pow(e+$r,3),$s=({x:e,y:t,b:n,alpha:o})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);const r=Dt(e+t)-xe,s=Dt(t-e)-xe,i=Dt(n+t)-xe,a=Se({r:11.031566904639861*r-9.866943908131562*s-.16462299650829934*i,g:-3.2541473810744237*r+4.418770377582723*s-.16462299650829934*i,b:-3.6588512867136815*r+2.7129230459360922*s+1.9459282407775895*i});return o!==void 0&&(a.alpha=o),a},ws={mode:"xyb",channels:["x","y","b","alpha"],parse:["--xyb"],serialize:"--xyb",toMode:{rgb:$s},fromMode:{rgb:vs},ranges:{x:[-.0154,.0281],y:[0,.8453],b:[-.2778,.388]},interpolate:{x:g,y:g,b:g,alpha:{use:g,fixup:I}}},ks={mode:"xyz50",parse:["xyz-d50"],serialize:"xyz-d50",toMode:{rgb:Oe,lab:an},fromMode:{rgb:Xe,lab:sn},channels:["x","y","z","alpha"],ranges:{x:[0,.964],y:[0,.999],z:[0,.825]},interpolate:{x:g,y:g,z:g,alpha:{use:g,fixup:I}}},_s=e=>{let{x:t,y:n,z:o,alpha:r}=e;t===void 0&&(t=0),n===void 0&&(n=0),o===void 0&&(o=0);let s={mode:"xyz50",x:1.0479298208405488*t+.0229467933410191*n-.0501922295431356*o,y:.0296278156881593*t+.990434484573249*n-.0170738250293851*o,z:-.0092430581525912*t+.0150551448965779*n+.7518742899580008*o};return r!==void 0&&(s.alpha=r),s},Ps=e=>{let{x:t,y:n,z:o,alpha:r}=e;t===void 0&&(t=0),n===void 0&&(n=0),o===void 0&&(o=0);let s={mode:"xyz65",x:.9554734527042182*t-.0230985368742614*n+.0632593086610217*o,y:-.0283697069632081*t+1.0099954580058226*n+.021041398966943*o,z:.0123140016883199*t-.0205076964334779*n+1.3303659366080753*o};return r!==void 0&&(s.alpha=r),s},Cs={mode:"xyz65",toMode:{rgb:ve,xyz50:_s},fromMode:{rgb:ye,xyz50:Ps},ranges:{x:[0,.95],y:[0,1],z:[0,1.088]},channels:["x","y","z","alpha"],parse:["xyz","xyz-d65"],serialize:"xyz-d65",interpolate:{x:g,y:g,z:g,alpha:{use:g,fixup:I}}},zs=({r:e,g:t,b:n,alpha:o})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);const r={mode:"yiq",y:.29889531*e+.58662247*t+.11448223*n,i:.59597799*e-.2741761*t-.32180189*n,q:.21147017*e-.52261711*t+.31114694*n};return o!==void 0&&(r.alpha=o),r},Ts=({y:e,i:t,q:n,alpha:o})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);const r={mode:"rgb",r:e+.95608445*t+.6208885*n,g:e-.27137664*t-.6486059*n,b:e-1.10561724*t+1.70250126*n};return o!==void 0&&(r.alpha=o),r},Rs={mode:"yiq",toMode:{rgb:Ts},fromMode:{rgb:zs},channels:["y","i","q","alpha"],parse:["--yiq"],serialize:"--yiq",ranges:{i:[-.595,.595],q:[-.522,.522]},interpolate:{y:g,i:g,q:g,alpha:{use:g,fixup:I}}},Es=e=>Math.max(0,Math.min(1,e||0)),Ot=e=>Math.round(Es(e)*255),Ss=Me("rgb"),Is=e=>{if(e===void 0)return;let t=Ot(e.r),n=Ot(e.g),o=Ot(e.b);return"#"+(1<<24|t<<16|n<<8|o).toString(16).slice(1)},Te=e=>Is(Ss(e)),Ls=e=>{e[0]===void 0&&(e[0]=0),e[e.length-1]===void 0&&(e[e.length-1]=1);let t=1,n,o,r,s;for(;t<e.length;){if(e[t]===void 0){for(o=t,r=e[t-1],n=t;e[n]===void 0;)n++;for(s=(e[n]-r)/(n-t+1);t<n;)e[t]=r+(t+1-o)*s,t++}else e[t]<e[t-1]&&(e[t]=e[t-1]);t++}return e},Ns=(e=.5)=>t=>e<=0?1:e>=1?0:Math.pow(t,Math.log(.5)/Math.log(e)),Je=e=>typeof e=="function",ge=e=>e&&typeof e=="object",qn=e=>typeof e=="number",Fs=(e,t="rgb",n,o)=>{let r=Jn(t),s=Me(t),i=[],a=[],d={};e.forEach(m=>{Array.isArray(m)?(i.push(s(m[0])),a.push(m[1])):qn(m)||Je(m)?d[a.length]=m:(i.push(s(m)),a.push(void 0))}),Ls(a);let u=r.channels.reduce((m,p)=>{let M;return ge(n)&&ge(n[p])&&n[p].fixup?M=n[p].fixup:ge(r.interpolate[p])&&r.interpolate[p].fixup?M=r.interpolate[p].fixup:M=v=>v,m[p]=M(i.map(v=>v[p])),m},{}),h=r.channels.reduce((m,p)=>{let M;return Je(n)?M=n:ge(n)&&Je(n[p])?M=n[p]:ge(n)&&ge(n[p])&&n[p].use?M=n[p].use:Je(r.interpolate[p])?M=r.interpolate[p]:ge(r.interpolate[p])&&(M=r.interpolate[p].use),m[p]=M(u[p]),m},{}),b=i.length-1;return m=>{if(m=Math.min(Math.max(0,m),1),m<=a[0])return i[0];if(m>a[b])return i[b];let p=0;for(;a[p]<m;)p++;let M=a[p-1],v=a[p]-M,$=(m-M)/v,x=d[p]||d[0];x!==void 0&&(qn(x)&&(x=Ns((x-M)/v)),$=x($));let _=(p-1+$)/b;return r.channels.reduce((C,z)=>{let T=h[z](_);return T!==void 0&&(C[z]=T),C},{mode:t})}},Hs=(e,t="rgb",n)=>Fs(e,t,n);function Dn(e){let t=Me("lrgb")(e);return .2126*t.r+.7152*t.g+.0722*t.b}function te(e,t){let n=Dn(e),o=Dn(t);return(Math.max(n,o)+.05)/(Math.min(n,o)+.05)}P(mo);P(ko);P(_o);P(Po);P(To);P(or);P(ar);P(Ao);P(qo);P(Bo);P(Wo);P(ln);P(Yo);P(dn);P(Zo);P(ss);P(is);P(as);P(fs);P(cs);P(hs);P(gs);P(ms);P(bs);P(ys);P(Re);P(ws);P(ks);P(Cs);P(Rs);function js(e,t){if(!V(e))return"#000000";if(!t)return te("#fff",e)>=te("#000",e)?"#ffffff":"#000000";if(!this.getAllPalettes().find(s=>s.name===t))return console.warn(`Palette "${t}" not found, falling back to black/white`),te("#fff",e)>=te("#000",e)?"#ffffff":"#000000";const n=this.getAllKeysForPalette(t);if(n.length===0)return console.warn(`Palette "${t}" has no colors, falling back to black/white`),te("#fff",e)>=te("#000",e)?"#ffffff":"#000000";let o=null,r=0;for(const s of n)try{const i=this.resolve(s);if(i&&i!=="invalid"){const a=te(i,e);a>r&&(r=a,o=i)}}catch{continue}if(o)return o;for(const s of n)try{const i=this.resolve(s);if(i&&i!=="invalid")return i}catch{continue}return"#000000"}const wr={"css-variables":e=>"",scss:e=>"",json:e=>""};function As(e,t,n=.5,o="lab"){try{const r=V(e),s=V(t);if(!r||!s)return e;const i=Hs([r,s],o),a=typeof n=="string"?parseFloat(n)/100:n;return Te(i(a))}catch{return e}}const kr={"css-variables":e=>{const[t,n,o=.5,r="lab"]=e,i=100-(typeof o=="string"&&o.includes("%")?parseFloat(o):parseFloat(o)*100);return`color-mix(in ${r}, ${t} ${i}%, ${n})`},scss:e=>{const[t,n,o=.5]=e,r=typeof o=="string"&&o.includes("%")?parseFloat(o):parseFloat(o)*100;return`mix(${n}, ${t}, ${r}%)`},json:e=>""};function qs(e,t){try{const n=V(e);if(!n)return e;if(t.includes("/ 0.8")){const o={...n,alpha:.8};return Te(o)}return Te(n)}catch{return e}}const _r={"css-variables":e=>{const[t,n]=e;return`rgb(from ${t} ${n})`},scss:e=>"",json:e=>""};function Ds(e,t=1.5){if(!V(e))return"#000000";const n=te("#fff",e),o=te("#000",e);return n>=t?"#ffffff":o>=t?"#000000":n>=o?"#ffffff":"#000000"}const Pr={"css-variables":e=>"",scss:e=>"",json:e=>""};function Os(e,t){try{const n=V(e);if(!n)return e;const r=Me("hsl")(n);return r&&typeof r.l=="number"?(r.l=Math.min(1,r.l+t),Te(r)):e}catch{return e}}const Cr={"css-variables":e=>{const[t,n]=e,o=Math.round(parseFloat(n)*100);return`color-mix(in oklch, ${t} ${100-o}%, white)`},scss:e=>{const[t,n]=e,o=Math.round(parseFloat(n)*100);return`lighten(${t}, ${o}%)`},json:e=>""};function Xs(e,t){try{const n=V(e);if(!n)return e;const r=Me("hsl")(n);return r&&typeof r.l=="number"?(r.l=Math.max(0,r.l-t),Te(r)):e}catch{return e}}const zr={"css-variables":e=>{const[t,n]=e,o=Math.round(parseFloat(n)*100);return`color-mix(in oklch, ${t} ${100-o}%, black)`},scss:e=>{const[t,n]=e,o=Math.round(parseFloat(n)*100);return`darken(${t}, ${o}%)`},json:e=>""};class ke{constructor(t){this.key=t,this.type=Symbol.for("ColorReference")}}class _e{constructor(t,n,o){this.fn=t,this.args=n,this.dependencies=o,this.type=Symbol.for("ColorFunction")}execute(t){const n=this.args.map(o=>typeof o=="string"&&t.has(o)?t.resolve(o):o);return this.fn(...n)}}class W extends Error{constructor(t){super(t),this.name="PaletteError"}}class we extends Error{constructor(t){super(`Circular dependency detected: ${t.join(" -> ")}`),this.path=t,this.name="CircularDependencyError"}}var A,ne,K,Q,Z,ae,me,le,re,Ce,E,w,Jt,Tr,je,Gt,Rr,Er,Sr,Ir,Lr,Ut,Nr,Qt,Fr;class Bs{constructor(t={}){R(this,w);R(this,A,new Map);R(this,ne,new Map);R(this,K,new Map);R(this,Q,new Map);R(this,Z,new Map);R(this,ae,"auto");R(this,me,new Set);R(this,le,new EventTarget);R(this,re,new Map);R(this,Ce);R(this,E);U(this,ae,t.mode||"auto"),k(this,w,Fr).call(this)}registerFunction(t,n){if(this[t]||t==="ref"||t==="func")throw new W(`Function name "${t}" is reserved.`);l(this,re).set(t,n),l(this,E)&&l(this,E).call(this,`Registered function '${t}'.`)}func(t,...n){if(!l(this,re).has(t))throw new W(`Custom function "${t}" is not registered.`);const o=l(this,re).get(t),r=n.filter(s=>typeof s=="string"&&s.includes("."));return new _e(o,n,r)}createPalette(t,n={}){const{extends:o,overrides:r={}}=n;if(l(this,A).has(t))throw new W(`Palette "${t}" already exists.`);if(o&&!l(this,A).has(o))throw new W(`Base palette "${o}" does not exist.`);if(l(this,A).set(t,{extends:o,overrides:r}),l(this,E)&&l(this,E).call(this,`Palette '${t}' created${o?` extending '${o}'`:""}.`),o&&Object.keys(r).length>0)for(const[s,i]of Object.entries(r))this.define(`${t}.${s}`,i)}extendPalette(t,n,o={}){return this.createPalette(t,{extends:n,overrides:o})}copyPalette(t,n){if(!l(this,A).has(t))throw new W(`Source palette "${t}" does not exist.`);if(l(this,A).has(n))throw new W(`Target palette "${n}" already exists.`);const o=this.getAllKeysForPalette(t);this.createPalette(n);for(const r of o){const s=r.split(".").slice(1).join("."),i=this.getDefinitionForKey(r);this.define(`${n}.${s}`,i)}l(this,E)&&l(this,E).call(this,`Copied palette '${t}' to '${n}'.`)}deletePalette(t){if(!l(this,A).has(t))throw new W(`Palette "${t}" does not exist.`);const n=this.getAllKeysForPalette(t);for(const o of n)l(this,ne).delete(o),l(this,K).delete(o),l(this,Q).delete(o),l(this,Z).delete(o);l(this,A).delete(t),l(this,E)&&l(this,E).call(this,`Deleted palette '${t}'.`)}define(t,n){const[o]=t.split(".");if(!l(this,A).has(o))throw new W(`Palette "${o}" does not exist. Create it first.`);k(this,w,Jt).call(this,t,n)}set(t,n){if(!this.has(t))throw new W(`Color "${t}" is not defined. Use .define() first.`);k(this,w,Jt).call(this,t,n)}flush(){if(l(this,ae)!=="batch")return;const t=k(this,w,Lr).call(this,Array.from(l(this,me))),n=[];for(const o of t){const r=l(this,K).get(o);k(this,w,je).call(this,o);const s=l(this,K).get(o);r!==s&&(n.push({key:o,oldValue:r,newValue:s}),k(this,w,Qt).call(this,o,s,r))}n.length>0&&(l(this,le).dispatchEvent(new CustomEvent("change",{detail:n})),l(this,le).dispatchEvent(new CustomEvent("batch-complete",{detail:n})),l(this,E)&&l(this,E).call(this,`Flush complete. ${n.length} colors updated.`)),l(this,me).clear()}resolve(t){if(!l(this,K).has(t))try{k(this,w,je).call(this,t)}catch(n){return l(this,E)&&l(this,E).call(this,`Failed to resolve '${t}': ${n.message}`),"invalid"}return l(this,K).get(t)}has(t){let[n,o]=t.split(".");const r=new Set;for(;n;){if(r.has(n))throw new we([...r,n]);if(r.add(n),l(this,ne).has(`${n}.${o}`))return!0;const s=l(this,A).get(n);if(!s||!s.extends)break;n=s.extends}return!1}on(t,n){l(this,le).addEventListener(t,n)}watch(t,n){this.on(`watch:${t}`,o=>{const r=o;n(r.detail.newValue,r.detail.oldValue)})}ref(t){return new ke(t)}getAllPalettes(){return Array.from(l(this,A).entries()).map(([t,n])=>({name:t,config:n}))}getAllKeysForPalette(t){return k(this,w,Rr).call(this,t)}valueToString(t){return k(this,w,Ut).call(this,t)}getRawValue(t){var n;if(t instanceof ke)return`ref('${t.key}')`;if(t instanceof _e){const o=((n=[...l(this,re).entries()].find(([s,i])=>i===t.fn))==null?void 0:n[0])||t.fn.name.replace("bound ",""),r=t.args.map(s=>typeof s=="string"?`'${s}'`:s).join(", ");return`${o}(${r})`}return t}get mode(){return l(this,ae)}set mode(t){U(this,ae,t)}get batchQueueSize(){return l(this,me).size}getDependencies(t){return Array.from(l(this,Z).get(t)||[])}getDependents(t){return Array.from(l(this,Q).get(t)||[])}getConnectionGraph(){const t={};for(const[n,o]of l(this,Z).entries())t[n]=Array.from(o);return t}getDefinitionForKey(t){try{return k(this,w,Gt).call(this,t)}catch(n){throw new W(`Failed to get definition for key '${t}': ${n.message}`)}}getCustomFunctions(){return new Map(l(this,re))}getPaletteDependencies(t){const n=this.getAllKeysForPalette(t),o=new Set;for(const r of n){const s=this.getDependencies(r);for(const i of s)i.startsWith(`${t}.`)||o.add(i)}return Array.from(o)}resolvePalette(t){const n=this.getAllKeysForPalette(t),o={};for(const r of n){const s=r.split(".").slice(1).join(".");o[s]=this.resolve(r)}return o}createRenderer(t){if(!l(this,Ce))throw new Error("ColorRenderer class not injected. Please call setColorRenderer() first.");return new(l(this,Ce))(this,t)}setColorRenderer(t){U(this,Ce,t)}setLogCallback(t){U(this,E,t)}}A=new WeakMap,ne=new WeakMap,K=new WeakMap,Q=new WeakMap,Z=new WeakMap,ae=new WeakMap,me=new WeakMap,le=new WeakMap,re=new WeakMap,Ce=new WeakMap,E=new WeakMap,w=new WeakSet,Jt=function(t,n){if(typeof n=="string"&&!V(n))throw new W(`Invalid color value: "${n}". Must be a valid CSS color or a router function.`);l(this,ne).set(t,n),k(this,w,Er).call(this,t,n),l(this,ae)==="auto"?k(this,w,Tr).call(this,t):l(this,me).add(t),l(this,E)&&l(this,E).call(this,`Defined '${t}' = ${k(this,w,Ut).call(this,n)}`)},Tr=function(t){const n=k(this,w,Ir).call(this,t),o=[];for(const r of n){const s=l(this,K).get(r);k(this,w,je).call(this,r);const i=l(this,K).get(r);s!==i&&(o.push({key:r,oldValue:s,newValue:i}),k(this,w,Qt).call(this,r,i,s))}o.length>0&&l(this,le).dispatchEvent(new CustomEvent("change",{detail:o}))},je=function(t,n=[]){if(n.includes(t))throw new we([...n,t]);const o=k(this,w,Gt).call(this,t);let r;return o instanceof ke?r=k(this,w,je).call(this,o.key,[...n,t]):o instanceof _e?r=o.execute(this):r=k(this,w,Nr).call(this,o),l(this,K).set(t,r),r},Gt=function(t){let[n,o]=t.split(".");const r=new Set;for(;n;){if(r.has(n))throw new we([...r,n]);r.add(n);const s=`${n}.${o}`;if(l(this,ne).has(s))return l(this,ne).get(s);const i=l(this,A).get(n);if(!i||!i.extends)break;n=i.extends}throw new W(`Color '${t}' not found in palette hierarchy.`)},Rr=function(t){const n=new Set;let o=t;const r=[],s=new Set;for(;o&&!s.has(o);){s.add(o),r.unshift(o);const i=l(this,A).get(o);o=i==null?void 0:i.extends}if(o&&s.has(o))throw new we([...s,o]);for(const i of r){const a=`${i}.`;for(const d of l(this,ne).keys())d.startsWith(a)&&n.add(d.split(".").slice(1).join("."))}return Array.from(n).map(i=>`${t}.${i}`)},Er=function(t,n){var r;if(l(this,Z).has(t))for(const s of l(this,Z).get(t))(r=l(this,Q).get(s))==null||r.delete(t);l(this,Z).set(t,new Set);const o=k(this,w,Sr).call(this,n);for(const s of o)l(this,Q).has(s)||l(this,Q).set(s,new Set),l(this,Q).get(s).add(t),l(this,Z).get(t).add(s)},Sr=function(t){return t instanceof ke?[t.key]:t instanceof _e?t.dependencies:[]},Ir=function(t){const n=new Set,o=[],r=this;function s(i){n.has(i)||(n.add(i),(l(r,Q).get(i)||[]).forEach(s),o.push(i))}return s(t),o.reverse()},Lr=function(t){const n=[],o=new Set,r=new Set,s=this,i=a=>{if(o.has(a))return;if(r.has(a))throw new we([...r,a]);r.add(a);const d=l(s,Z).get(a);if(d)for(const u of d)t.includes(u)&&i(u);r.delete(a),o.add(a),n.push(a)};for(const a of t)if(!o.has(a))try{i(a)}catch(d){if(d instanceof we)l(this,E)&&l(this,E).call(this,`Circular dependency detected for '${a}': ${d.message}`),o.has(a)||(o.add(a),n.push(a));else throw d}return n},Ut=function(t){var n;if(t instanceof ke)return`ref('${t.key}')`;if(t instanceof _e){const o=((n=[...l(this,re).entries()].find(([s,i])=>i===t.fn))==null?void 0:n[0])||t.fn.name.replace("bound ",""),r=t.args.map(s=>typeof s=="string"?`'${s}'`:s).join(", ");return`${o}(${r})`}return`'${t}'`},Nr=function(t){const n=V(t);return n?Te(n):"#00000000"},Qt=function(t,n,o){l(this,le).dispatchEvent(new CustomEvent(`watch:${t}`,{detail:{newValue:n,oldValue:o}}))},Fr=function(){this.registerFunction("bestContrastWith",js.bind(this)),this.registerFunction("colorMix",As),this.registerFunction("relativeTo",qs),this.registerFunction("minContrastWith",Ds),this.registerFunction("lighten",Os),this.registerFunction("darken",Xs)};var H,N,be,Y,en,jr,tn,Ar;class Hr{constructor(t,n="css-variables"){R(this,Y);R(this,H);R(this,N);R(this,be,new Map);U(this,H,t),U(this,N,n==="css"?"css-variables":n),k(this,Y,en).call(this)}registerFunctionRenderer(t,n){l(this,be).has(l(this,N))||l(this,be).set(l(this,N),new Map),l(this,be).get(l(this,N)).set(t,n)}render(){const t=new Set;l(this,H).getAllPalettes().forEach(({name:r})=>{l(this,H).getAllKeysForPalette(r).forEach(s=>t.add(s))});const n=Array.from(t).sort();if(l(this,N)==="json"){const r={};for(const s of n)r[s]=l(this,H).resolve(s);return JSON.stringify(r,null,2)}let o="";for(const r of n){const s=l(this,H).getDefinitionForKey(r),i=k(this,Y,jr).call(this,s,r);l(this,N)==="css-variables"?o+=`  --${r.replace(/\./g,"-")}: ${i};
`:l(this,N)==="scss"&&(o+=`$${r.replace(/\./g,"-")}: ${i};
`)}return l(this,N)==="css-variables"?`:root {
${o}}`:o}get format(){return l(this,N)}set format(t){U(this,N,t==="css"?"css-variables":t),k(this,Y,en).call(this)}}H=new WeakMap,N=new WeakMap,be=new WeakMap,Y=new WeakSet,en=function(){const t=[{name:"bestContrastWith",renderers:wr},{name:"colorMix",renderers:kr},{name:"relativeTo",renderers:_r},{name:"minContrastWith",renderers:Pr},{name:"lighten",renderers:Cr},{name:"darken",renderers:zr}];for(const{name:n,renderers:o}of t){const r=o[l(this,N)];r&&this.registerFunctionRenderer(n,r)}},jr=function(t,n){return t instanceof ke?k(this,Y,tn).call(this,t.key):t instanceof _e?k(this,Y,Ar).call(this,t,n):l(this,H).resolve(n)},tn=function(t){return l(this,N)==="scss"?`$${t.replace(/\./g,"-")}`:l(this,N)==="css-variables"?`var(--${t.replace(/\./g,"-")})`:l(this,H).resolve(t)},Ar=function(t,n){var i;const o=l(this,be).get(l(this,N));if(!o)return l(this,H).resolve(n);const r=((i=[...l(this,H).getCustomFunctions().entries()].find(([a,d])=>d===t.fn))==null?void 0:i[0])||"unknown",s=o.get(r);if(!s)return l(this,H).resolve(n);try{const a=t.args.map(u=>typeof u=="string"&&u.includes(".")&&l(this,H).has(u)?k(this,Y,tn).call(this,u):u),d=s(a);return d===""?l(this,H).resolve(n):d}catch(a){return console.warn(`Failed to render function ${r}:`,a),l(this,H).resolve(n)}};const Ws=e=>Math.sqrt(Math.pow(e.w,2)+Math.pow(e.h,2)),Vs=(e,t={})=>{const{gap:n=0,useMaxDiagonal:o=!0,padding:r=.2}=t;let s=[...e];const i=Math.max(...s.map(x=>x.h)),a=Math.max(...s.map(x=>x.w)),d=Math.max(i,a);let u=0;s=s.map(x=>{const{w:_,h:C}=x,z=Math.max(_,C),T=Ws(o?{w:z,h:z}:x);return u+=T,x.diagonal=T,x.diagonalHalf=T/2,x});const h=n*(s.length-1),b=u+h,m=Math.max(b/Math.PI,d+n*2),p=m+a+n*2,M=m+i+n*2,v={w:p+p*r,h:M+M*r,r:m/2,centerX:0,centerY:0};v.centerX=v.w/2,v.centerY=v.h/2;const $=[];return s.reduce((x,_)=>{const C=_.diagonalHalf,z=(x+C)/(b-h);return $.push(z),x+_.diagonal},0),s=s.map((x,_)=>{x.angle=360*$[_]%360,x.angleRadians=x.angle*(Math.PI/180),x.cx=v.centerX+m/2*Math.cos(x.angleRadians),x.cy=v.centerY+m/2*Math.sin(x.angleRadians);const C=x.cy-x.h/2,z=x.cy+x.h/2,T=x.cx-x.w/2,D=x.cx+x.w/2;return x.top=C,x.left=T,x.bottom=z,x.right=D,x}),{tableItems:s,tableBoundingRect:v}},Ys=(e,t,n={})=>{const{widthPerLetter:o=7,fontSize:r=10,lineHeight:s=1.5,itemPadding:i=[10,5]}=n,a=[e,...Object.keys(t)],d=Math.max(...a.map(p=>p.length)),u=r*s+i[1]*2,h=d*o+i[0]*2,b=a.length*u,m={};return a.forEach((p,M)=>{const v=M*u,$=v+u/2+r/2-1;m[p]={rectTop:v,textTop:$,height:u}}),{w:h,h:b,title:e,colors:t,topPositions:m}};var J,De,q,nn,Dr,Or,Xr,Br,Wr;class qr extends Hr{constructor(n,o={}){super(n,"json");R(this,q);R(this,J);R(this,De);U(this,De,n),U(this,J,{gap:20,useMaxDiagonal:!0,padding:.2,widthPerLetter:7,fontSize:10,lineHeight:1.5,itemPadding:[10,5],showConnections:!0,strokeWidth:2,dotRadius:5,...o})}get router(){return l(this,De)}render(){const n=this.router,o=n.getAllPalettes();if(o.length===0)return k(this,q,nn).call(this,200,100,'<text x="100" y="50" text-anchor="middle" font-family="monospace">No palettes defined</text>');const r=o.map(({name:p})=>{const M=n.getAllKeysForPalette(p),v={};return M.forEach($=>{const x=$.split(".").slice(1).join(".");v[x]=n.resolve($)}),Ys(p,v,l(this,J))}),s=Vs(r,l(this,J)),i=k(this,q,Or).call(this,s.tableItems,s.tableBoundingRect),a=k(this,q,Xr).call(this,n,i),d=k(this,q,Br).call(this,a),u=k(this,q,Wr).call(this,i),h=s.tableItems.map(p=>k(this,q,Dr).call(this,p,p.left,p.top)).join(""),m=`
      <style>
        .palette-table {
          fill: white;
          stroke: black;
          stroke-width: 1;
        }
        .palette-table__row {
          fill: none;
          stroke: black;
          stroke-width: 1;
        }
        .palette-table__row--header {
          fill: black;
        }
        text {
          font-family: monospace;
        }
        .palette-table__label {
          fill: black;
        }
        .palette-table__label--header {
          font-weight: bold;
          fill: white;
        }
        .connections-bg {
          opacity: 0.8;
        }
        .connections {
          opacity: 0.9;
        }
        .dots {
          cursor: pointer;
        }
        .dots circle:hover {
          stroke-width: 2;
          r: ${(l(this,J).dotRadius||5)+1};
        }
      </style>
    `+d+`<g class="tables">${h}</g>`+u;return k(this,q,nn).call(this,s.tableBoundingRect.w,s.tableBoundingRect.h,m)}}J=new WeakMap,De=new WeakMap,q=new WeakSet,nn=function(n,o,r){return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${n} ${o}">${r}</svg>`},Dr=function(n,o,r){if(!n.title||!n.colors||!n.topPositions)return"";const{w:s,h:i,title:a,colors:d,topPositions:u}=n,{fontSize:h,itemPadding:b=[10,5]}=l(this,J),p=[a,...Object.keys(d)].map(M=>{const v=M===a,{rectTop:$,textTop:x,height:_}=u[M],C=v?"":d[M],z=`<rect class="palette-table__row ${v?"palette-table__row--header":""}" width="${s}" height="${_}" y="${$}" 
        ${C?`data-color="${C}"`:""} />`,T=`<text class="palette-table__label ${v?"palette-table__label--header":""}" x="${b[0]}" y="${x}" font-size="${h}"
        ${C?`data-color="${C}"`:""}>${M}</text>`;return z+T}).join("");return`<g transform="translate(${o}, ${r})">
      <rect class="palette-table" width="${s}" height="${i}" />
      ${p}
    </g>`},Or=function(n,o){const r={};return n.forEach(s=>{!s.title||!s.colors||!s.topPositions||Object.keys(s.colors).forEach(i=>{const a=`${s.title}.${i}`,d=s.topPositions[i],u=s.left<o.centerX,h=u?s.left+s.w:s.left,b=d.rectTop+d.height/2+s.top;r[a]={key:a,x:h,y:b,isLeft:u,color:s.colors[i]||"#000000",colorName:i}})}),r},Xr=function(n,o){const r=[],s=new Set;return Object.keys(o).forEach(i=>{const a=n.getDependencies(i),d=o[i];d&&a.forEach(u=>{const h=o[u];if(h){const b=`${i}->${u}`,m=`${u}->${i}`;!s.has(b)&&!s.has(m)&&(r.push({from:d,to:h}),s.add(b))}})}),r},Br=function(n){if(!l(this,J).showConnections||n.length===0)return"";const{strokeWidth:o=2}=l(this,J),r=n.map(i=>{const{from:a,to:d}=i,h=40+Math.abs(a.y-d.y)*.3;return`<path d="${`M ${a.x} ${a.y} C ${a.x+(a.isLeft?h:-h)} ${a.y}, ${d.x+(d.isLeft?h:-h)} ${d.y}, ${d.x} ${d.y}`}" stroke="#000" stroke-width="${o+1.5}" fill="none" />`}).join(""),s=n.map(i=>{const{from:a,to:d}=i,h=40+Math.abs(a.y-d.y)*.3;return`<path d="${`M ${a.x} ${a.y} C ${a.x+(a.isLeft?h:-h)} ${a.y}, ${d.x+(d.isLeft?h:-h)} ${d.y}, ${d.x} ${d.y}`}" stroke="${a.color}" stroke-width="${o}" fill="none" data-color="${a.color}" />`}).join("");return`
      <g class="connections-bg">${r}</g>
      <g class="connections">${s}</g>
    `},Wr=function(n){const{dotRadius:o=5}=l(this,J);return`<g class="dots">${Object.values(n).map(s=>`<circle cx="${s.x}" cy="${s.y}" r="${o}" 
        fill="${s.color}" stroke="black" stroke-width="1" 
        data-color="${s.color}" data-key="${s.key}" />`).join("")}</g>`};const f=new Bs;f.setColorRenderer(Hr);function Ks(){const e=[{name:"bestContrastWith",renderers:wr},{name:"colorMix",renderers:kr},{name:"relativeTo",renderers:_r},{name:"minContrastWith",renderers:Pr},{name:"lighten",renderers:Cr},{name:"darken",renderers:zr}];["css-variables","scss","json"].forEach(n=>{const o=f.createRenderer(n);e.forEach(({name:r,renderers:s})=>{const i=s[n];i&&o.registerFunctionRenderer(r,i)})})}Ks();function j(e){const t=document.getElementById("event-log-container");t&&(t.innerHTML=`<p><span class="text-gray-400">${new Date().toLocaleTimeString()}</span> &mdash; ${e}</p>`+t.innerHTML)}f.setLogCallback(j);function un(){const e=document.getElementById("palettes-container");e&&(e.innerHTML="",f.getAllPalettes().forEach(({name:t,config:n})=>{const o=document.createElement("div");o.className="bg-white p-6 shadow-sm border border-gray-200 fade-in";let r=`<h3 class="text-xl text-gray-800">${t}</h3>`;n.extends&&(r+=`<p class="text-sm text-gray-500">extends <span class="font-medium text-indigo-600">${n.extends}</span></p>`);const s=f.getAllKeysForPalette(t);let i='<div class="mt-4 space-y-3">';s.length>0?s.sort().forEach(a=>{const d=a.split(".").slice(1).join("."),u=f.getDefinitionForKey(a),h=f.resolve(a)||"#transparent";i+=`
          <div class="flex items-center justify-between text-sm">
            <div class="flex items-center gap-3">
              <div class="color-swatch" style="background-color: ${h};"></div>
              <div>
                <p class="font-semibold text-gray-900">${d}</p>
                <p class="font-mono text-xs text-gray-500">${f.valueToString(u)}</p>
              </div>
            </div>
            <div class="flex items-center gap-2">
              <p class="font-mono text-gray-700">${h}</p>
              <button class="edit-color-btn text-indigo-600 hover:text-indigo-800 text-xs" data-key="${a}" title="Edit this color">
                <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                </svg>
              </button>
            </div>
          </div>`}):i+='<p class="text-sm text-gray-500">No colors defined yet.</p>',o.innerHTML=r+i+"</div>",e.appendChild(o)}))}function pt(){const e=document.querySelector(".tab-button.active"),t=(e==null?void 0:e.dataset.tab)||"css-variables",n=document.getElementById("output-container");if(n)try{if(t==="svg"){const r=new qr(f,{showConnections:!0,gap:20,padding:.1,fontSize:10,strokeWidth:2,dotRadius:4}).render();n.innerHTML=`
        <div class="bg-white p-4 h-96 overflow-auto flex items-center justify-center svg-container">
          ${r}
        </div>
      `}else{document.getElementById("output-code")||(n.innerHTML=`
          <div class="bg-gray-900 p-4 h-96 overflow-auto">
            <pre><code id="output-code" class="language-${t} text-sm text-gray-200 font-mono"></code></pre>
          </div>
        `);const r=f.createRenderer(t),s=document.getElementById("output-code");s.textContent=r.render(),s.className=`language-${t} text-sm text-gray-200 font-mono`}}catch(o){const r=document.getElementById("output-code");r?r.textContent=`Error rendering output:
${o.message}`:n.innerHTML=`
        <div class="bg-gray-900 p-4 h-96 overflow-auto">
          <pre class="text-red-400 text-sm">Error rendering output:
${o.message}</pre>
        </div>
      `}}function gt(){const e=document.getElementById("color-demo-container");if(e)try{const n=f.createRenderer("css-variables").render();let o=document.getElementById("demo-styles");o||(o=document.createElement("style"),o.id="demo-styles",document.head.appendChild(o)),o.textContent=n,e.innerHTML=`
      <!-- Card Palette Demo -->
      <div class="p-6 rounded-lg border shadow-sm mb-8" style="background-color: var(--card-background, #ffffff); border-color: var(--card-interaction, #0066cc); color: var(--card-onBackground, #0f172a);">
        <h3 class="text-xl font-medium mb-3">Simplified Card Component</h3>
        <p class="text-sm mb-4 opacity-75">This card uses only 4 essential colors: background, onBackground, interaction, and onInteraction.</p>
        <div class="flex flex-wrap gap-2 mb-4">
          <button class="px-4 py-2 text-sm font-medium rounded transition-colors" style="background-color: var(--card-interaction, #0066cc); color: var(--card-onInteraction, #ffffff);">Primary Action</button>
          <button class="px-3 py-2 text-sm font-medium rounded border transition-colors" style="border-color: var(--card-interaction, #0066cc); color: var(--card-interaction, #0066cc); background-color: transparent;">Secondary</button>
        </div>
        <div class="text-xs space-y-1 opacity-75">
          <p><strong>Color System:</strong></p>
          <p>• Background: <code>ref('scale.0')</code> → <code>var(--card-background)</code></p>
          <p>• On Background: <code>bestContrastWith('card.background', 'scale')</code> → <code>var(--card-onBackground)</code></p>
          <p>• Interaction: <code>ref('bold-colors.0')</code> → <code>var(--card-interaction)</code></p>
          <p>• On Interaction: <code>bestContrastWith('bold-colors.0', 'scale')</code> → <code>var(--card-onInteraction)</code></p>
        </div>
      </div>
    `}catch(t){e.innerHTML=`<p class="text-red-500 text-sm">Error rendering demo: ${t.message}</p>`}}function Ie(){var t;const e=document.getElementById("svg-visualization-container");if(e)try{const n=((t=document.getElementById("show-connections"))==null?void 0:t.checked)??!0,r=new qr(f,{showConnections:n,gap:25,padding:.15,fontSize:12,strokeWidth:2,dotRadius:5,lineHeight:1.4,widthPerLetter:8}).render();e.innerHTML=`
      <div class="svg-container w-full h-full flex items-center justify-center">
        ${r}
      </div>
    `}catch(n){e.innerHTML=`
      <div class="text-center text-red-500">
        <svg class="w-12 h-12 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        <p class="text-lg font-medium">Error rendering visualization</p>
        <p class="text-sm">${n.message}</p>
      </div>
    `}}var On;(On=document.getElementById("create-palette"))==null||On.addEventListener("click",()=>{const e=document.getElementById("palette-name");if(e!=null&&e.value)try{f.createPalette(e.value),e.value="",un(),pt(),gt(),Ie()}catch(t){j(`<span class="text-red-500">ERROR:</span> ${t.message}`)}});var Xn;(Xn=document.getElementById("define-color"))==null||Xn.addEventListener("click",()=>{const e=document.getElementById("color-key"),t=document.getElementById("color-value");if(!(!(e!=null&&e.value)||!(t!=null&&t.value)))try{let n=t.value.trim();const o=n.match(/ref\(['"](.*?)['"]\)/),r=n.match(/bestContrastWith\(['"](.*?)['"](?:,\s*['"](.*?)['"]\))?\)/),s=n.match(/colorMix\(['"](.*?)['"],\s*['"](.*?)['"](?:,\s*(['"]*[\d.%]+['"]*))?\s*(?:,\s*['"](.*?)['"]\))?\)/),i=n.match(/relativeTo\(['"](.*?)['"],\s*['"](.*?)['"]\)/),a=n.match(/minContrastWith\(['"](.*?)['"](?:,\s*([\d.]+))?\)/),d=n.match(/lighten\(['"](.*?)['"],\s*([\d.]+)\)/),u=n.match(/darken\(['"](.*?)['"],\s*([\d.]+)\)/),h=n.match(/func\(['"](.*?)['"](?:,\s*(.*))?\)/);if(o)n=f.ref(o[1]);else if(r){const b=[r[1]];r[2]&&b.push(r[2]),n=f.func("bestContrastWith",...b)}else if(s){const b=s[1],m=s[2];let p=s[3]||"0.5";const M=s[4]||"lab";p=p.replace(/['"]/g,""),p.includes("%")&&(p=(parseFloat(p)/100).toString()),n=f.func("colorMix",b,m,parseFloat(p),M)}else if(i)n=f.func("relativeTo",i[1],i[2]);else if(a){const b=a[2]?parseFloat(a[2]):1.5;n=f.func("minContrastWith",a[1],b)}else if(d)n=f.func("lighten",d[1],parseFloat(d[2]));else if(u)n=f.func("darken",u[1],parseFloat(u[2]));else if(h){const b=h[1],m=h[2]?JSON.parse(`[${h[2].replace(/'/g,'"')}]`):[];n=f.func(b,...m)}f.has(e.value)?f.set(e.value,n):f.define(e.value,n),un(),pt(),gt(),Ie()}catch(n){j(`<span class="text-red-500">ERROR:</span> ${n.message}`)}});var Bn;(Bn=document.getElementById("clear-form"))==null||Bn.addEventListener("click",()=>{const e=document.getElementById("color-key"),t=document.getElementById("color-value");e&&(e.value=""),t&&(t.value=""),j("Form cleared")});document.querySelectorAll(".tab-button").forEach(e=>{e.addEventListener("click",t=>{document.querySelectorAll(".tab-button").forEach(n=>n.classList.remove("active")),t.target.classList.add("active"),pt(),gt(),Ie()})});var Wn;(Wn=document.getElementById("show-connections"))==null||Wn.addEventListener("change",()=>{Ie()});var Vn;(Vn=document.getElementById("refresh-viz"))==null||Vn.addEventListener("click",()=>{Ie()});document.addEventListener("click",e=>{const n=e.target.closest(".edit-color-btn");if(n){const o=n.dataset.key;o&&Zs(o)}});function Zs(e){var i;const t=f.getDefinitionForKey(e),n=f.getRawValue(t),o=document.getElementById("color-key"),r=document.getElementById("color-value");o&&(o.value=e),r&&(r.value=n);const s=(i=o==null?void 0:o.closest("div"))==null?void 0:i.closest("div");s&&(s.scrollIntoView({behavior:"smooth",block:"center"}),s.style.border="2px solid #4f46e5",s.style.borderRadius="8px",s.style.padding="1rem",setTimeout(()=>{s.style.border="",s.style.borderRadius="",s.style.padding=""},3e3)),j(`Editing color '${e}' - current value: ${n}`)}f.registerFunction("closestColor",(e,t,n=0)=>{const o=f.getAllKeysForPalette(t);if(!o.length)return"#transparent";const r=V(e);if(!r)return"#transparent";let s="",i=1/0;const a=wo(1,1,1);for(const u of o){const h=f.resolve(u),b=V(h);if(!b)continue;const m=a(r,b);m<i&&m>=n&&(i=m,s=u)}return s?f.resolve(s):""});function Js(){j("Initializing ColorRouter demo..."),f.createPalette("base"),f.define("base.light","#ffffff"),f.define("base.dark","#202126"),f.define("base.accent","#0066cc"),f.define("base.attention","#ff6600"),f.createPalette("demo"),f.define("demo.primary","#3498db"),f.define("demo.secondary","#e74c3c"),f.define("demo.mixed",f.func("colorMix","demo.primary","demo.secondary",.3,"lab")),f.define("demo.lighter",f.func("lighten","demo.primary",.2)),f.define("demo.darker",f.func("darken","demo.primary",.2)),f.define("demo.contrast",f.func("bestContrastWith","demo.primary","ramp")),f.define("demo.relative",f.func("relativeTo","demo.primary","r g b / 0.7")),f.define("demo.minContrast",f.func("minContrastWith","demo.primary",4.5)),f.createPalette("scale"),f.define("scale.0",f.ref("base.accent")),f.define("scale.4",f.ref("base.attention")),f.define("scale.1",f.func("colorMix","scale.0","scale.4",.25,"oklab")),f.define("scale.2",f.func("colorMix","scale.0","scale.4",.5,"oklab")),f.define("scale.3",f.func("colorMix","scale.0","scale.4",.75,"oklab")),f.createPalette("ramp"),f.define("ramp.0",f.ref("base.light")),f.define("ramp.900",f.ref("base.dark")),f.define("ramp.800",f.func("colorMix","ramp.0","ramp.900",.8,"oklab")),f.define("ramp.700",f.func("colorMix","ramp.0","ramp.900",.7,"oklab")),f.define("ramp.600",f.func("colorMix","ramp.0","ramp.900",.6,"oklab")),f.define("ramp.500",f.func("colorMix","ramp.0","ramp.900",.5,"oklab")),f.define("ramp.400",f.func("colorMix","ramp.0","ramp.900",.4,"oklab")),f.define("ramp.300",f.func("colorMix","ramp.0","ramp.900",.3,"oklab")),f.define("ramp.200",f.func("colorMix","ramp.0","ramp.900",.2,"oklab")),f.define("ramp.100",f.func("colorMix","ramp.0","ramp.900",.1,"oklab")),f.createPalette("card"),f.define("card.background",f.ref("ramp.0")),f.define("card.onBackground",f.func("bestContrastWith","card.background","ramp")),f.define("card.interaction",f.ref("scale.0")),f.define("card.onInteraction",f.func("bestContrastWith","card.interaction","ramp")),f.define("card.warning",f.func("closestColor","#ff0000","scale",0)),f.define("card.onWarning",f.func("bestContrastWith","card.warning","ramp")),f.flush(),Gs(),j("• BASE: Foundation colors (light, dark, accent, attention)"),j("• DEMO: Function demonstration (colorMix, lighten, darken, bestContrastWith, relativeTo, minContrastWith)"),j("• SCALE: Systematic neutral scale - 900=base.dark, others lighten progressively"),j("• CARD: Essential theming (background/onBackground, interaction/onInteraction, warning/onWarning)"),j("Try changing base.dark to see entire scale update automatically!"),un(),pt(),gt(),Ie()}function Gs(){j("🔧 RENDERER COMPARISON:"),["css-variables","scss","json"].forEach(r=>{const a=f.createRenderer(r).render().split(`
`).slice(0,8).join(`
`);j(`<strong>${r.toUpperCase()}:</strong><br><code style="font-size: 11px; color: #666; white-space: pre-wrap;">${a}...</code>`)});const o=f.createRenderer("css-variables").render().match(/--card-onInteraction:\s*([^;]+);/);j(o?`🎯 CARD TEXT COLOR: --card-onInteraction: ${o[1]}`:"⚠️  --card-onInteraction not found in CSS output")}f.on("change",e=>{e.detail.forEach(n=>{const o=n.oldValue||"undefined";j(`CHANGE: '${n.key}' from ${o} to <span class="font-bold" style="color:${n.newValue}; text-shadow: 0 0 5px rgba(0,0,0,0.5);">${n.newValue}</span>`)})});Js();
